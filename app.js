window.onload=function(){setTimeout("window.scrollTo(0, 1)",10);var a=new Main;createjs.Tween.get(a,{ignoreGlobalPause:!0}).wait(100).call(a.init,[],a)}; var Main=function(){function a(){a.s1=this.bgStage=new createjs.Stage("bgStage");a.s2=this.stage=new createjs.Stage("mainStage");this.bgStage.canvas.width=Config.STAGE_W;this.bgStage.canvas.height=Config.STAGE_H_MAX;this.stage.canvas.width=Config.STAGE_W;this.stage.canvas.height=Config.STAGE_H_MIN}a.prototype.init=function(){var b=this;this.bg=new LayerBg;this.bgStage.addChild(this.bg);this.core=new Core(this.bg);this.stage.addChild(this.core);this.bgStage.update();this.stage.update();createjs.Touch.enable(this.stage); createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.setFPS(30);createjs.Ticker.on(GameEvent.UPDATE,this.update,this);this.resizeHandler();window.addEventListener(GUIEvent.RESIZE,function(){return b.resizeHandler()});window.addEventListener(GUIEvent.ORIENTATION_CHANGE,function(){return b.resizeHandler()});this.addCheckFocus()};a.prototype.resizeHandler=function(){var b=window.innerWidth,c=window.innerHeight,a=0,d=0,f=0,g=0,h=b/c,k=Config.STAGE_W/Config.STAGE_H_MIN,l=Config.STAGE_W/Config.STAGE_H_MAX; h>=k?(f=a=c*k,d=c,g=f/l):h<k&&(h>=k?(a=b,d=c):h<k&&(a=b,d=b/k),h>=l?(f=b,g=b/l):h<l&&(f=b,g=b/l));f=.5+f|0;g=.5+g|0;a=.5+a|0;d=.5+d|0;b=document.getElementById("wrapper");b.style.marginLeft=(.5*-a+.5|0)+"px";b.style.marginTop=Math.round(.5*-d)+"px";this.bgStage.canvas.style.marginTop=-((g-d>>1)+.5|0)+"px";this.bgStage.canvas.style.width=f+"px";this.bgStage.canvas.style.height=g+"px";this.stage.canvas.style.width=a+"px";this.stage.canvas.style.height=d+"px";this.bgStage.update();this.stage.update()}; a.prototype.addCheckFocus=function(){window.isActive="visible";"hidden"in document?document.addEventListener("visibilitychange",this.changeHandler):"mozHidden"in document?document.addEventListener("mozvisibilitychange",this.changeHandler):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",this.changeHandler):"msHidden"in document?document.addEventListener("msvisibilitychange",this.changeHandler):"onfocusin"in document&&(document.onfocusin=document.onfocusout=this.changeHandler); window.onpageshow=window.onpagehide=window.onfocus=window.onblur=this.changeHandler};a.prototype.changeHandler=function(b){var c={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in c?"hidden"==c[b.type]&&"visible"==window.isActive?(window.isActive="hidden",a.prevState=b.type,GameBranding.adsPause()):"visible"==c[b.type]&&"hidden"==window.isActive&&(window.isActive="visible",a.prevState=b.type,GameBranding.adsResume()): (a.counterVisible++,a.prevState!=b.type&&"visible"==window.isActive&&1==a.counterVisible?(window.isActive="hidden",a.prevState=b.type,GameBranding.adsPause()):a.prevState==b.type&&"hidden"==window.isActive&&(window.isActive="visible",a.prevState="focus",a.counterVisible=0,GameBranding.adsResume()))};a.prototype.update=function(b){this.stage.update(b)};a.forceUpdate=function(){a.s1.update();a.s2.update()};a.prevState="focus";a.counterVisible=0;return a}(),Config=function(){function a(){}a.WIDTH=8; a.HEIGHT=9;a.SIZE_W=80;a.SIZE_H=70;a.STAGE_W=640;a.STAGE_H_MIN=750;a.STAGE_H_MAX=1138;a.MARGIN_TOP=120;a.PADDING=194;a.GAME_NAME="Mike&Mia";a.GAME_VERSION="1.0.0";return a}(),Hints=function(){function a(){}a.texts={0:[160,540,0],3:[130,380,3],7:[40,350,2]};a.textsAfterAction={0:{x0:120,y0:370,x1:365,y1:370,type0:1,type1:4}};a.textsForIndex={25:[280,370,1],30:[205,370,4]};a.pointer={};a.pointerAfterAction={0:{x0:90,y0:290,x1:490,y1:290}};a.pointerForIndex={25:[250,290],30:[330,290]};return a}(),Progress= function(){function a(){}a.levelsCompleted=1;a.currentLevel=0;a.starsToLevels=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];a.currentStars=0;return a}(),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c},Core=function(a){function b(c){a.call(this);this.snapToPixel=!0;this.ga=window.gaTracker;this.bg=c;b.instance=this;this.name="core";this.preloader=new Preloader;this.addChild(this.preloader); GameAPI.loadAPI(function(c){b.instance.api=c;b.instance.preloader.on(GameEvent.COMPLETE,b.instance.init,b.instance)})}__extends(b,a);b.prototype.init=function(c){this.preloader.removeAllEventListeners();this.model=new Model;ImagesRes.init();this.preloader.on(GameEvent.COMPLETE,this.initCompleted,this);this.preloader.initProgress()};b.prototype.initCompleted=function(){JSONRes.init();this.bg.initAll();new SoundManager;this.model.loadProgress();this.ga&&this.ga.send("pageview","/InitMainMenu");this.addView(View.MAIN_MENU); SoundManager.instance.setLocation(SoundManager.MUSIC_MENU);this.preloader.removeAllEventListeners();this.removeChild(this.preloader);this.preloader=null};b.prototype.restartHandler=function(c){Progress.currentStars=0;this.addBlind()};b.prototype.completeHandler=function(c){Progress.currentLevel++;GameAPI.GameBreak.request(GameBranding.adsPause,this.continueGame);createjs.Ticker.getPaused()||this.continueGame()};b.prototype.continueGame=function(){GameBranding.adsResume();b.instance.removeView();b.instance.startGame()}; b.prototype.setLevel=function(c){""!=c&&(Progress.currentLevel=+c)};b.prototype.startGame=function(c){c=new Game;this.blind?this.addChildAt(c,this.getNumChildren()-1):this.addChild(c);c.createHint();c.on(GameEvent.RESTART,this.restartHandler,this);c.on(GameEvent.LEVEL_COMPLETE,this.completeHandler,this);this.currentView=c;c.on(GUIEvent.GOTO_WINDOW,this.gotoHandler,this)};b.prototype.addBlind=function(){this.blind||(this.blind=new Blind,this.addChild(this.blind),this.blind.on(GUIEvent.BLIND_CLOSED, this.removeView,this),this.blind.on(GUIEvent.BLIND_CLOSED,this.startGame,this),this.blind.on(GameEvent.COMPLETE,this.removeBlind,this))};b.prototype.removeBlind=function(c){this.blind.removeAllEventListeners();this.removeChild(this.blind);this.blind.destroy();this.blind=null};b.prototype.addView=function(c){this.removeView();switch(c){case View.MAIN_MENU:this.currentView=new MainMenu;break;case View.CREDITS:this.currentView=new Credits;break;case View.LEVELS:this.currentView=new Levels;this.currentView.on(GameEvent.GOTO_LEVEL, this.gotoLevelHandler,this);break;case View.INTRO:this.currentView=new Intro;break;case View.GAME_COMPLETE:this.currentView=new GameComplete;break;default:console.log("switch",c)}this.addChild(this.currentView);Main.forceUpdate();this.currentView.on(GUIEvent.GOTO_WINDOW,this.gotoHandler,this)};b.prototype.removeView=function(c){Progress.currentStars=0;this.currentView&&(this.removeChild(this.currentView),this.currentView.removeAllEventListeners(),this.currentView.destroy(),this.currentView=null)}; b.prototype.gotoHandler=function(c){this.currentView instanceof Game&&SoundManager.instance.setLocation(SoundManager.MUSIC_MENU);this.removeView();c.window==View.GAME?(SoundManager.instance.setLocation(SoundManager.MUSIC_GAME),this.addBlind()):this.addView(c.window)};b.prototype.gotoLevelHandler=function(c){this.removeView();"0"!=c.objectType?(SoundManager.instance.setLocation(SoundManager.MUSIC_GAME),this.setLevel(c.objectType),this.addBlind()):(Progress.currentLevel=0,this.addView(View.INTRO))}; b.prototype.getView=function(){return this.currentView};return b}(createjs.Container),View=function(a){function b(){a.call(this);this.on(GUIEvent.MOUSE_CLICK,this.clickHandler,this)}__extends(b,a);b.prototype.clickHandler=function(c){c.stopPropagation();if(c.target.parent.name){var a;c.target.parent.name==b.MORE_GAMES?GameBranding.clickMoreHandler(c):(c.target.parent instanceof LevelButton?(a=new GameEvent(GameEvent.GOTO_LEVEL),a.objectType=c.target.parent.name):(a=new GUIEvent(GUIEvent.GOTO_WINDOW), a.window=c.target.parent.name),this.dispatchEvent(a))}};b.prototype.addCommonBg=function(c){"undefined"===typeof c&&(c=ImagesRes.MAIN_BG);b.currentBg!=c&&(Core.instance.bg.removeAllBg(),b.currentBg=c,Core.instance.bg.addBg(c),GameBranding.addLogo(this))};b.prototype.destroy=function(){this.removeAllEventListeners();this.removeAllChildren()};b.MAIN_MENU="mainMenu";b.LEVELS="levels";b.GAME="game";b.CREDITS="credits";b.WALKTHROUGH="walkthrough";b.INTRO="intro";b.GAME_COMPLETE="gameComplete";b.MORE_GAMES= "more";b.currentBg="";return b}(createjs.Container),Game=function(a){function b(){a.call(this);this.model=Core.instance.model;this.grid=this.model.grid;this.x=Config.STAGE_W-Config.WIDTH*Config.SIZE_W>>1;this.y=Config.MARGIN_TOP;a.prototype.addCommonBg.call(this,ImagesRes.GAME_BG);this.createGUI();this.currentLevel=new Level(this,this.model);this.heroGirl=this.currentLevel.heroGirl;this.heroBoy=this.currentLevel.heroBoy;this.stars=this.currentLevel.stars;this.presses=this.currentLevel.presses;this.barriers= this.currentLevel.barriers;this.heroBoy.setPartner(this.heroGirl);this.heroBoy.setIdleCallback(this.createHintForIndex);this.heroGirl.setPartner(this.heroBoy);this.heroGirl.setIdleCallback(this.createHintForIndex);this.on(GUIEvent.MOUSE_DOWN,this.movedownHandler,this);this.on(GameEvent.COLLISION,this.collisionProcess,this);this.heroBoy.on(GameEvent.LEVEL_COMPLETE,this.showVictory,this);this.heroGirl.on(GameEvent.LEVEL_COMPLETE,this.showVictory,this);Core.instance.ga&&Core.instance.ga.send("pageview", "/StartLevel-"+(Progress.currentLevel+1))}__extends(b,a);b.prototype.movedownHandler=function(c){var b=this.globalToLocal(c.stageX,c.stageY);c.target.parent instanceof Hero&&!c.target.parent.isActive()?(this.currentHero=c.target.parent,this.currentHero.state==Hero.IDLE&&(this.heroGirl.deactivate(),this.heroBoy.deactivate(),this.currentHero.activate(),this.removeHint(),this.createHintAfterAction())):this.currentHero&&this.currentHero.state==Hero.IDLE&&(c=Utils.getIndex(b.x,b.y),this.grid.length>c&& 0<=c&&(this.point=b,b=new createjs.Point(this.grid[c].x,this.grid[c].y),this.checkPath(b,c)))};b.prototype.checkPath=function(c,b){if(c.x!=this.currentHero.x||c.y!=this.currentHero.y){var a=b,f=0,g=0,h=0;if((c.y==this.currentHero.y||c.y==this.currentHero.y-Config.SIZE_H)&&c.x>this.currentHero.x)f=h=1,c.y==this.currentHero.y-Config.SIZE_H&&(a+=Config.WIDTH);else if((c.y==this.currentHero.y||c.y==this.currentHero.y-Config.SIZE_H)&&c.x<this.currentHero.x)f=h=-1,c.y==this.currentHero.y-Config.SIZE_H&& (a+=Config.WIDTH);else if(c.x==this.currentHero.x&&c.y>this.currentHero.y)h=Config.WIDTH,g=1;else if(c.x==this.currentHero.x&&c.y<this.currentHero.y)h=-Config.WIDTH,g=-1;else return;for(var k=this.currentHero.index,l=0;k!=a;l++)k+=h;0!=f?this.currentHero==this.heroGirl?(this.heroGirl.moveToCell(f,g,l,h),this.heroBoy.moveToCell(-f,g,l,-h)):this.currentHero==this.heroBoy&&(this.heroBoy.moveToCell(f,g,l,h),this.heroGirl.moveToCell(-f,g,l,-h)):(this.heroGirl.moveToCell(f,g,l,h),this.heroBoy.moveToCell(f, g,l,h));this.removeHint()}};b.prototype.collisionProcess=function(c){c.stopPropagation();if(c.objectType==ImagesRes.STAR){var b=this.stars[c.index].view;delete this.stars[c.index];this.grid[c.index].removeType(ImagesRes.STAR);this.grid[c.index].removeObject(b);b.spriteSheet=JSONRes.atlas1;b.gotoAndPlay(ImagesRes.A1_STAR_GET);b.x-=10;b.y-=20;b.on(GameEvent.ANIMATION_COMPLETE,this.animationCompleteHandler,this);b.name=ImagesRes.STAR;Progress.currentStars++}else if(c.objectType==ImagesRes.PRESS)for(b in this.presses[c.index].turnOff(), this.grid[c.index].removeType(ImagesRes.PRESS+0),this.barriers)this.barriers[b].turnOff(),this.grid[b].removeType(ImagesRes.BARRIER)};b.prototype.animationCompleteHandler=function(c){c=c.currentTarget;c.removeAllEventListeners();this.removeChild(c)};b.prototype.createGUI=function(){Utils.addBitmap(0,0,ImagesRes.GAME_FIELD,this,!0);var c=new createjs.Container;this.addChild(c);c.y=-100;this.buttonSound=new Button(ImagesRes.BUTTON_SOUND_ON,ImagesRes.BUTTON_SOUND_ON_OVER,ImagesRes.BUTTON_SOUND_OFF,ImagesRes.BUTTON_SOUND_OFF_OVER); c.addChild(this.buttonSound);this.buttonSound.x=Config.STAGE_W-this.buttonSound.width-20;this.buttonSound.name="";this.buttonMenu=new Button(ImagesRes.BUTTON_MENU,ImagesRes.BUTTON_MENU_OVER);c.addChild(this.buttonMenu);this.buttonMenu.x=this.buttonSound.x-this.buttonMenu.width-20;this.buttonMenu.name="";this.buttonMenu.on(GUIEvent.MOUSE_CLICK,this.menuClickHandler,this);this.buttonRestart=new Button(ImagesRes.BUTTON_RESET,ImagesRes.BUTTON_RESET_OVER);c.addChild(this.buttonRestart);this.buttonRestart.x= this.buttonMenu.x-this.buttonRestart.width-20;this.buttonRestart.name="";this.buttonRestart.on(GUIEvent.MOUSE_CLICK,this.restartClickHandler,this);c=new createjs.BitmapText((Progress.currentLevel+1).toString(),JSONRes.atlasGameFont);this.addChild(c);c.mouseEnabled=!1;c.snapToPixel=!0;c.x=150;c.y=-88};b.prototype.menuClickHandler=function(c){c=new GUIEvent(GUIEvent.GOTO_WINDOW);c.window=View.LEVELS;this.dispatchEvent(c)};b.prototype.restartClickHandler=function(c){this.dispatchEvent(new GameEvent(GameEvent.RESTART))}; b.prototype.createHint=function(){if(Hints.texts[Progress.currentLevel]){var c=Hints.texts[Progress.currentLevel],b=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.HELP+c[2]));b.mouseEnabled=!1;b.snapToPixel=!0;Core.instance.addChildAt(b,Core.instance.getNumChildren());this.help=b;b.x=c[0];b.y=c[1]}};b.prototype.createHintAfterAction=function(){if(Hints.textsAfterAction[Progress.currentLevel]&&(0!=Progress.currentLevel||210!=this.currentHero.y)){var c=Hints.textsAfterAction[Progress.currentLevel], b=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.HELP+c["type"+this.currentHero.type.substr(4,1)]));b.mouseEnabled=!1;b.snapToPixel=!0;Core.instance.addChildAt(b,Core.instance.getNumChildren());this.help=b;b.x=c["x"+this.currentHero.type.substr(4,1)];b.y=c["y"+this.currentHero.type.substr(4,1)];Hints.pointerAfterAction[Progress.currentLevel]&&(c=Hints.pointerAfterAction[Progress.currentLevel],b=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.HELP_POINTER)),b.mouseEnabled=!1,b.snapToPixel=!0,Core.instance.addChildAt(b, Core.instance.getNumChildren()-1),this.pointer=b,b.x=c["x"+this.currentHero.type.substr(4,1)],b.y=c["y"+this.currentHero.type.substr(4,1)])}};b.prototype.createHintForIndex=function(c){c.removeHint();if(0==Progress.currentLevel&&Hints.textsForIndex[c.currentHero.index]){var b=Hints.textsForIndex[c.currentHero.index],a=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.HELP+b[2]));a.mouseEnabled=!1;a.snapToPixel=!0;Core.instance.addChildAt(a,Core.instance.getNumChildren());c.help=a;a.x=b[0];a.y=b[1]; Hints.pointerAfterAction[Progress.currentLevel]&&(b=Hints.pointerForIndex[c.currentHero.index],a=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.HELP_POINTER)),a.mouseEnabled=!1,a.snapToPixel=!0,Core.instance.addChildAt(a,Core.instance.getNumChildren()-1),c.pointer=a,a.x=b[0],a.y=b[1])}};b.prototype.removeHint=function(){this.help&&(Core.instance.removeChild(this.help),this.help=null);this.pointer&&(Core.instance.removeChild(this.pointer),this.pointer=null)};b.prototype.showVictory=function(c){Core.instance.ga&& Core.instance.ga.send("pageview","/LevelComplete-"+(Progress.currentLevel+1)+"_Stars-"+Progress.currentStars);this.heroBoy.removeAllEventListeners();this.heroGirl.removeAllEventListeners();Progress.currentLevel<Progress.starsToLevels.length-1?this.parent.addChild(new Victory(this)):(c=new GUIEvent(GUIEvent.GOTO_WINDOW),c.window=View.GAME_COMPLETE,this.dispatchEvent(c))};b.prototype.destroy=function(){this.removeAllEventListeners(GUIEvent.MOUSE_DOWN);this.removeAllEventListeners(GameEvent.COLLISION); this.buttonMenu.removeAllEventListeners();this.buttonRestart.removeAllEventListeners();this.buttonSound.removeAllEventListeners();this.heroGirl.destroy();this.heroBoy.destroy();this.removeAllEventListeners();this.removeHint();for(var c=this.grid,b=c.length,a=0;a<b;a++)c[a].clear();this.removeAllChildren();this.buttonRestart=this.buttonSound=this.buttonMenu=this.point=this.currentLevel=this.model=this.grid=this.heroBoy=this.heroGirl=this.stars=null};return b}(View),GameBranding=function(){function a(){} a.addLogo=function(b,c,e){"undefined"===typeof c&&(c=-10);"undefined"===typeof e&&(e=10);var d=100<Preloader.a10logo.width?Preloader.a10logo.width:202,f=30<Preloader.a10logo.height?Preloader.a10logo.height:50,g=Config.STAGE_W-d-c,h=Config.STAGE_H_MIN-f-e;a.logo?(b instanceof Game?(g=180,h=e-70):(g=Config.STAGE_W-d-c,h=Config.STAGE_H_MIN-f-e),a.logo.x=g,a.logo.y=h,b.addChild(a.logo)):(c=new createjs.Container,b.addChild(c),b=new createjs.Bitmap(Preloader.a10logo),c.addChild(b),b.mouseEnabled=!1,c.x= g,c.y=h,g=100<Preloader.a10logo.width?Preloader.a10logo.width:202,h=30<Preloader.a10logo.height?Preloader.a10logo.height:50,b=new createjs.Graphics,e=new createjs.Shape(b),b.beginFill("rgba(255,255,255, 0.01)"),b.drawRect(0,0,g,h),b.endFill(),e.snapToPixel=!0,c.addChild(e),c.on(GUIEvent.MOUSE_CLICK,a.clickLogoHandler,this),a.logo=c)};a.clickLogoHandler=function(b){Core.instance.api.Branding.getLogo().action()};a.clickMoreHandler=function(b){Core.instance.api.Branding.getLink("more_games").action()}; a.addSplash=function(){Core.instance.api.Branding.displaySplashScreen(a.removeSplash)};a.removeSplash=function(){};a.adsPause=function(){createjs.Ticker.setPaused(!0);SoundManager.instance&&SoundManager.instance.getIsMusic()&&(SoundManager.instance.muteOnOff(),a.isSound=!0)};a.adsResume=function(){createjs.Ticker.setPaused(!1);SoundManager.instance&&a.isSound&&(SoundManager.instance.muteOnOff(),a.isSound=!1)};a.isSound=!1;return a}(),LayerBg=function(a){function b(){a.call(this);this.bgTypes=[ImagesRes.MAIN_BG, ImagesRes.CREDITS_BG,ImagesRes.GAME_BG,ImagesRes.GAME_COMPLETE_BG,ImagesRes.INTRO_BG,ImagesRes.LEVEL_SELECT_BG];this.bgs={};this.snapToPixel=!0}__extends(b,a);b.prototype.initAll=function(){for(var c=0;c<this.bgTypes.length;c++){var b=new createjs.Bitmap(ImagesRes.getImage(this.bgTypes[c]));b.snapToPixel=!0;this.addChild(b);b.visible=!1;this.bgs[this.bgTypes[c]]=b}};b.prototype.addBg=function(c,b){"undefined"===typeof b&&(b=null);c==ImagesRes.PRELOADER_BG?(b.snapToPixel=!0,this.addChild(b),this.preloaderBg= b):this.bgs[c].visible=!0;this.update()};b.prototype.removeBg=function(b){b==ImagesRes.PRELOADER_BG&&(this.removeChild(this.preloaderBg),this.preloaderBg=null);this.update()};b.prototype.removeAllBg=function(){for(var b in this.bgs)this.bgs[b].visible=!1;this.update()};b.prototype.update=function(){this.getStage().update()};b.prototype.addShape=function(b){this.addChild(b);this.update()};b.prototype.removeAllShapes=function(){for(var b=this.getNumChildren()-1;0<=b;b--)this.getChildAt(b)instanceof createjs.Shape&&this.removeChild(this.getChildAt(b));this.update()};return b}(createjs.Container),Level=function(){function a(b,c){this.container=b;this.model=c;this.stars={};this.presses={};this.barriers={};var a;a=JSONRes.levelFromEditor?JSONRes.levelFromEditor:JSONRes.levels[Progress.currentLevel];for(var d,f,g=0;g<a.length;g++){d=a[g].index;f=a[g].types;for(var h=0;h<f.length;h++)this.checkCell(d,f[h],f,a[g])}}a.prototype.checkCell=function(b,c,a,d){a=this.model.grid;switch(c){case ImagesRes.HERO+ 0:this.heroGirl=new Hero(b,c);this.container.addChild(this.heroGirl);break;case ImagesRes.HERO+1:this.heroBoy=new Hero(b,c);this.container.addChild(this.heroBoy);break;case ImagesRes.PRESS+0:a=a[b].add(c,this.container,a);c=new Press(a,b,c);this.presses[b]=c;break;case ImagesRes.STAR:d=a[b].add(c,this.container,a);c=new Star(d,b,c);this.stars[b]=c;break;case ImagesRes.BARRIER:d=a[b].add(c,this.container,a);c=new Barrier(d,b,c);this.barriers[b]=c;break;case ImagesRes.DECOR+0:case ImagesRes.DECOR+1:case ImagesRes.DECOR+ 2:case ImagesRes.DECOR+3:a=a[b].add(c,this.container,a);a.x=d[c][0];a.y=d[c][1];break;case ImagesRes.HERO_ARROW:a[b].addType(ImagesRes.LEGO);break;case ImagesRes.HOLE_MARK:a[b].addType(ImagesRes.HOLE_MARK);break;default:a[b].add(c,this.container,a)}};return a}(),Model=function(){function a(){this.grid=Array(Config.WIDTH*Config.HEIGHT);this.createGrid()}a.prototype.createGrid=function(){for(var b=0,c=0,a=this.grid.length,d=0;d<a;d++)c=Math.floor(d/Config.WIDTH)*Config.SIZE_H,b=(d-Math.floor(d/Config.WIDTH)* Config.WIDTH)*Config.SIZE_W,this.grid[d]=new Tile(b,c,d)};a.prototype.saveProgress=function(){var b={};b.levelsCompleted=Progress.levelsCompleted;b.starsToLevels=Progress.starsToLevels;b.sound=SoundManager.instance.getIsMusic()?"1":"0";window.localStorage.setItem(Config.GAME_NAME+Config.GAME_VERSION,JSON.stringify(b))};a.prototype.loadProgress=function(){var b=window.localStorage.getItem(Config.GAME_NAME+Config.GAME_VERSION);b&&(b=JSON.parse(b),Progress.levelsCompleted=b.levelsCompleted,Progress.starsToLevels= b.starsToLevels,SoundManager.instance.setSaveState(b.sound,b.sound))};return a}(),SoundManager=function(){function a(){this.isMusic=this.isSFX=!0;this.currentLocation="";this.musicInstances={};this.musicPositions={};a.instance=this}a.prototype.setLocation=function(b){this.isMusic?b!=this.currentLocation&&(this.stopMusicTrack(),this.musicPositions[a.MUSIC_GAME]=0,this.musicPositions[a.MUSIC_MENU]=0,this.currentLocation=b,this.playMusicTrack()):this.currentLocation=b};a.prototype.playMusicTrack=function(){this.musicPositions[this.currentLocation]|| (this.musicPositions[this.currentLocation]=0);this.musicInstances[this.currentLocation]=createjs.Sound.play(this.currentLocation,"none",0,this.musicPositions[this.currentLocation],-1)};a.prototype.stopMusicTrack=function(){""!=this.currentLocation&&(this.musicPositions[this.currentLocation]=this.musicInstances[this.currentLocation].getPosition(),this.musicInstances[this.currentLocation].stop())};a.prototype.muteOnOff=function(){this.isMusic==this.isSFX&&(this.setIsMusic(!this.isMusic),this.setIsSFX(this.isMusic), this.currentButton&&this.currentButton.setState())};a.prototype.getIsSFX=function(){return this.isSFX};a.prototype.setIsSFX=function(b){this.isSFX=b};a.prototype.getIsMusic=function(){return this.isMusic};a.prototype.setIsMusic=function(b){(this.isMusic=b)?this.playMusicTrack():this.stopMusicTrack()};a.prototype.setSavingState=function(b){this.isSFX=this.isMusic=b};a.prototype.setCurrentButton=function(b){this.currentButton=b};a.prototype.setSaveState=function(b,a){"0"==b&&(this.isSFX=!1);"0"==a&& (this.isMusic=!1)};a.MUSIC_MENU="musicMenu";a.MUSIC_GAME="musicGame";return a}(),Tile=function(){function a(b,a,e){this.x=b;this.y=a;this.index=e;this.objects=[];this.types=[]}a.prototype.add=function(b,a,e,d){"undefined"===typeof e&&(e=null);"undefined"===typeof d&&(d=!1);this.types.push(b);b=this.getAlignedDO(b);this.objects.push(b);a.addChild(b);d&&this.setCorrectIndex(b,a,e);return b};a.prototype.getAlignedDO=function(b){var a=ImagesRes.getImage(b);switch(b){case ImagesRes.HERO+0:case ImagesRes.HERO+ 1:b=new createjs.Bitmap(a);b.x=this.x+(-a.width+Config.SIZE_W>>1);b.y=this.y+Config.SIZE_H-a.height-15;break;case ImagesRes.HERO_ARROW:case ImagesRes.HOLE_MARK:b=new createjs.Bitmap(a);b.x=this.x+(-a.width+Config.SIZE_W>>1);b.y=this.y;break;case ImagesRes.PRESS+0:case ImagesRes.NUT+0:case ImagesRes.NUT+1:b=new createjs.Bitmap(a);b.x=this.x+(-a.width+Config.SIZE_W>>1);b.y=this.y+Config.SIZE_H-a.height-2;break;case ImagesRes.PENCIL+0:case ImagesRes.PENCIL+1:case ImagesRes.PENCIL+2:case ImagesRes.PENCIL+ 3:b=new createjs.Bitmap(a);b.x=this.x+Config.SIZE_W-a.width-10;b.y=this.y+Config.SIZE_H-a.height-5;break;case ImagesRes.PENCIL2+0:case ImagesRes.PENCIL2+1:case ImagesRes.PENCIL2+2:case ImagesRes.PENCIL2+3:b=new createjs.Bitmap(a);b.scaleX=-1;b.x=this.x+a.width+10;b.y=this.y+Config.SIZE_H-a.height-5;break;case ImagesRes.HOLE+0:case ImagesRes.HOLE+1:case ImagesRes.HOLE+2:b=new createjs.Bitmap(a);b.x=this.x;b.y=this.y;break;case ImagesRes.CORK+0:case ImagesRes.CORK+1:b=new createjs.Bitmap(a);b.x=this.x+ 5;b.y=this.y-13;break;case ImagesRes.ERASER:b=new createjs.Bitmap(a);b.x=this.x+2;b.y=this.y+2;break;case ImagesRes.STAR:a=new createjs.Sprite(JSONRes.atlas0,ImagesRes.A0_STAR);a.framerate=30;a.x=this.x+(-a.getBounds().width+Config.SIZE_W>>1);a.y=this.y+(Config.SIZE_H-a.getBounds().height-20);b=a;break;case ImagesRes.BARRIER:a=new createjs.Sprite(JSONRes.atlas0,ImagesRes.A0_BARRIER);a.framerate=30;a.stop();a.x=this.x+(-a.getBounds().width+Config.SIZE_W>>1);a.y=this.y+(Config.SIZE_H-a.getBounds().height+ 30);b=a;break;default:b.substr(0,4)==ImagesRes.LEGO?(b=new createjs.Bitmap(a),b.x=this.x,b.y=this.y-20):(b=new createjs.Bitmap(a),b.x=this.x,b.y=this.y-10)}b.snapToPixel=!0;return b};a.prototype.setCorrectIndex=function(a,c,e){for(var d=0,f=e.length,g=0;g<f;g++)if(d+=e[g].objects.length,g==this.index){c.addChildAt(a,d);break}};a.prototype.remove=function(a){a=this.types.indexOf(a);if(-1!=a){var c=this.objects[a];c.parent.removeChild(c);this.objects.splice(a,1);this.types.splice(a,1)}};a.prototype.addType= function(a){-1==this.types.indexOf(a)&&this.types.push(a)};a.prototype.removeType=function(a){a=this.types.indexOf(a);-1!=a&&this.types.splice(a,1)};a.prototype.removeObject=function(a){a=this.objects.indexOf(a);-1!=a&&this.objects.splice(a,1)};a.prototype.getObject=function(a){a=this.types.indexOf(a);return-1!=a?this.objects[a]:null};a.prototype.isContainType=function(a){return-1!=this.types.indexOf(a)?!0:!1};a.prototype.isContainTypes=function(a){var c=this.types.indexOf(a+0),e=this.types.indexOf(a+ 1),d=this.types.indexOf(a+2);a=this.types.indexOf(a+3);return-1!=c||-1!=e||-1!=d||-1!=a?!0:!1};a.prototype.clear=function(){for(var a=0;a<this.objects.length;a++)this.objects[a].parent.removeChild(this.objects[a]);this.objects.length=0;this.types.length=0};a.prototype.getFirstIndex=function(){return 0==this.objects.length?-1:this.objects[0].parent.getChildIndex(this.objects[0])};a.prototype.getLastIndex=function(a){for(var c=Core.instance.model.grid,e=this.index,d=c[e].objects;0==d.length;){e--;if(-1== e)return 2;d=c[e].objects}return a.getChildIndex(d[0])+d.length-1};a.prototype.getIndex=function(a){a=this.types.indexOf(a);return-1==a?-1:this.objects[a].parent.getChildIndex(this.objects[a])};a.prototype.setIndex=function(a,c){var e;e=this.getLastIndex(a.parent);a.parent.addChildAt(a,e+1)};return a}(),GUIEvent=function(a){function b(b,e,d){"undefined"===typeof e&&(e=!1);"undefined"===typeof d&&(d=!1);a.call(this,b,e,d)}__extends(b,a);b.MOUSE_CLICK="click";b.MOUSE_DOWN="mousedown";b.MOUSE_UP="pressup"; b.RESIZE="resize";b.ORIENTATION_CHANGE="orientationchange";b.FOCUS="focus";b.BLUR="blur";b.GOTO_WINDOW="gotoWindow";b.BLIND_CLOSED="blindClosed";b.KEYDOWN="keydown";b.KEYUP="keyup";return b}(createjs.Event),GameEvent=function(a){function b(b,e,d){"undefined"===typeof e&&(e=!1);"undefined"===typeof d&&(d=!1);a.call(this,b,e,d)}__extends(b,a);b.GOTO_LEVEL="gotoLevel";b.UPDATE="tick";b.COMPLETE="complete";b.ANIMATION_COMPLETE="animationend";b.PROGRESS="progress";b.LEVEL_COMPLETE="levelComplete";b.RESTART= "restart";b.COLLISION="collision";b.EDITOR_ON_OFF="editorOnOff";return b}(createjs.Event),Preloader=function(a){function b(){a.call(this);this.texts=["Warming up for jumping...","Counting hearts...","Putting on best smile...","Coloring the letter M..."];var b=[{src:"images/preloader/PreloaderBack.png",id:ImagesRes.PRELOADER_BG},{src:"images/preloader/Bar.png",id:"progress"}];this.loader=new createjs.LoadQueue(!1,"",!0);this.loader.on(GameEvent.COMPLETE,this.completeHandler,this);this.loader.loadManifest(b)} __extends(b,a);b.prototype.completeHandler=function(){this.loader.removeAllEventListeners();var a=document.createElement("img");a.crossOrigin="Anonymous";a.src=Core.instance.api.Branding.getLogo().image;b.a10logo=a;a=this.loader.getResult(ImagesRes.PRELOADER_BG);a=new createjs.Bitmap(a);Core.instance.bg.addBg(ImagesRes.PRELOADER_BG,a);a=this.loader.getResult("progress");this.progressWidth=a.width;this.progress=new createjs.Bitmap(a);this.addChild(this.progress);this.progress.x=125;this.progress.y= 524-Config.PADDING;this.progress.sourceRect=new createjs.Rectangle(0,0,1,a.height);this.progress.mouseEnabled=!1;GameBranding.addLogo(this);this.addText();this.dispatchEvent(new createjs.Event(GameEvent.COMPLETE,!1,!1))};b.prototype.initProgress=function(){ImagesRes.loader.on(GameEvent.PROGRESS,this.progressHandler,this)};b.prototype.progressHandler=function(a){this.progress.sourceRect.width=a.progress*this.progressWidth;1==a.progress&&(ImagesRes.loader.removeAllEventListeners(),createjs.Tween.removeTweens(this.text), this.text.text="",this.removeChild(this.text),this.text=null,this.texts.length=0,this.texts=null,a=new Button(ImagesRes.BUTTON_PLAY_PRE,ImagesRes.BUTTON_PLAY_PRE_OVER),this.addChild(a),a.x=Config.STAGE_W-a.width>>1,a.y=400,a.on(GUIEvent.MOUSE_CLICK,this.clickHandler,this),GameBranding.addSplash())};b.prototype.clickHandler=function(a){a.currentTarget.removeAllEventListeners();Core.instance.bg.removeBg(ImagesRes.PRELOADER_BG);this.dispatchEvent(new createjs.Event(GameEvent.COMPLETE,!1,!1));this.removeAllChildren(); this.loader.removeAll();this.loader=this.progress=null};b.prototype.addText=function(){var a=new createjs.Text(this.texts[0],"bold 30px Trebuchet MS","#0888B5");this.addChild(a);a.mouseEnabled=!1;a.snapToPixel=!0;a.y=400;this.text=a;this.changeText(0)};b.prototype.changeText=function(a){this.text.text=this.texts[a];this.text.regX=this.text.getBounds().width>>1;this.text.x=Config.STAGE_W>>1;createjs.Tween.get(this.text).wait(5E3).call(this.changeText,[a+1>=this.texts.length?0:a+1],this)};return b}(createjs.Container), Hero=function(a){function b(c,e){a.call(this);this.directionY=this.directionX=this.directionIndex=0;this.currentState="idle";this.SPEED=300;this.lastStateIsActive=!1;this.step=this.allLen=0;this.grid=Core.instance.model.grid;this.currentIndex=c;this.type=e;var d=this.getAnimation(b.IDLE);b.currentView=this.view=new createjs.Sprite(d[0],d[1]);this.view.snapToPixel=!0;this.view.framerate=45;this.x=this.grid[c].x;this.y=this.grid[c].y;this.view.x=Config.SIZE_W-100>>1;this.view.y=Config.SIZE_H-195;b.currentTween= createjs.Tween.get(this).wait(30).call(this.addHeroView,[],this)}__extends(b,a);b.prototype.addHeroView=function(){this.addChild(this.view);this.arrows=new createjs.Container;this.parent.addChild(this.arrows);this.arrows.snapToPixel=!0;this.arrows.visible=!1;var a=ImagesRes.getImage(ImagesRes.HERO_ARROW);Utils.addBitmap(40,.5*-a.height-10,a,this.arrows,!1,0,!0);Utils.addBitmap(40,.5*a.height+110,a,this.arrows,!1,180,!0);Utils.addBitmap(.5*a.width+90,50,a,this.arrows,!1,90,!0);Utils.addBitmap(.5*-a.width- 10,50,a,this.arrows,!1,270,!0);this.arrows.mouseChildren=!1;this.arrows.mouseEnabled=!1;a=this.getAnimation(b.IDLE);this.view.gotoAndPlay(a[1])};b.prototype.moveToCell=function(a,b,d,f){this.directionIndex=f*d+this.currentIndex;this.allLen=d;this.step=f;this.directionX=a;this.directionY=b;a=this.currentIndex;b=0;this.grid[a].isContainType(ImagesRes.PRESS+0)&&(a+=f,b+=this.SPEED);for(;this.isPossibility(a,f,b);){if(a==this.directionIndex){this.currentIndex=this.directionIndex;this.timeMove=b;this.move(); break}this.allLen--;a+=f;b+=this.SPEED}};b.prototype.isPossibility=function(a,b,d){return(1==b||-1==b)&&(0>a||a>=this.grid.length||a!=this.currentIndex&&this.grid[a].y!=this.grid[a-b].y)||(b==Config.WIDTH||b==-Config.WIDTH)&&(0>a||a>=this.grid.length)?(this.currentIndex=a-b,this.timeMove=d,this.move(),!1):this.grid[a].isContainType(ImagesRes.LEGO)||this.grid[a].isContainType(ImagesRes.BARRIER)?(1>this.allLen?this.moveIdle():(this.currentIndex=a-b,this.timeMove=d,this.move()),!1):this.grid[a].isContainType(ImagesRes.STAR)? (this.currentIndex=a,this.timeMove=d,this.move(!0),!1):this.grid[a].isContainType(ImagesRes.HOLE_MARK)?(this.currentIndex=a-b,this.timeMove=d-this.SPEED,this.move(!0),!1):this.grid[a].isContainType(ImagesRes.PRESS+0)?(this.currentIndex=a,this.timeMove=d,this.move(!0),!1):!0};b.prototype.changeView=function(){if(this.view)if(this.currentState==b.IDLE){var a=this.getAnimation(b.IDLE);this.view.spriteSheet=a[0];this.view.gotoAndPlay(a[1])}else if(this.currentState==b.MOVE||this.currentState==b.MOVE_IDLE)a= this.getAnimation(b.MOVE),this.view.spriteSheet=a[0],this.view.gotoAndPlay(a[1]);else if(this.currentState==b.FALL){a=this.getAnimation(b.FALL);this.view.spriteSheet=a[0];this.view.gotoAndPlay(a[1]);this.view.framerate=20;this.view.y=Config.SIZE_H-200;this.view.on(GameEvent.ANIMATION_COMPLETE,this.die,this);var a=ImagesRes.getImage(ImagesRes.OOPS),e=new createjs.Bitmap(a);this.parent.addChild(e);e.x=Config.STAGE_W>>1;e.y=350;e.regX=a.width>>1;e.regY=a.height>>1;createjs.Tween.get(e).from({scaleX:.2, scaleY:.2,alpha:0},400,createjs.Ease.bounceOut)}};b.prototype.idle=function(){-1!=this.directionX&&-1!=this.directionY||this.grid[this.currentIndex].setIndex(this,!1);1!=this.directionX&&1!=this.directionY||this.grid[this.currentIndex].setIndex(this);if(this.currentIndex==this.partner.index||this.currentIndex-1==this.partner.index||this.currentIndex+1==this.partner.index||this.currentIndex-Config.WIDTH==this.partner.index||this.currentIndex+Config.WIDTH==this.partner.index)this.x!=this.partner.x&& this.y!=this.partner.y||this.partner.state!=b.IDLE&&this.partner.state!=b.MOVE_IDLE||this.levelComplete();this.partner.state==b.MOVE_IDLE&&this.partner.stopMoveIdle();this.directionIndex=0;this.currentState=b.IDLE;this.lastStateIsActive&&(this.arrows.x=this.x+this.view.x+10,this.arrows.y=this.y+this.view.y+65,this.arrows.visible=!0);this.changeView();this.callbackIdle&&this.callbackIdle(this.parent)};b.prototype.levelComplete=function(){this.view.removeAllEventListeners();this.dispatchEvent(new GameEvent(GameEvent.LEVEL_COMPLETE, !1,!1))};b.prototype.move=function(a){"undefined"===typeof a&&(a=!1);a=a?this.keepMove:this.idle;1!=this.directionX&&1!=this.directionY||this.grid[this.currentIndex].setIndex(this);this.currentState=b.MOVE;b.currentTween=createjs.Tween.get(this).to({x:this.grid[this.currentIndex].x,y:this.grid[this.currentIndex].y},this.timeMove,createjs.Ease.linear).call(a,[],this);this.timeMove=-1;this.arrows.visible=!1;this.changeView()};b.prototype.keepMove=function(){var a=new GameEvent(GameEvent.COLLISION,!0); a.index=this.currentIndex;-1!=this.directionX&&-1!=this.directionY||this.grid[this.currentIndex].setIndex(this,!1);this.grid[this.currentIndex].isContainType(ImagesRes.PRESS+0)?(a.objectType=ImagesRes.PRESS,this.dispatchEvent(a),this.moveToCell(this.directionX,this.directionY,this.allLen,this.step)):this.grid[this.currentIndex].isContainType(ImagesRes.STAR)?(a.objectType=ImagesRes.STAR,this.dispatchEvent(a),this.moveToCell(this.directionX,this.directionY,this.allLen,this.step)):this.grid[this.currentIndex+ this.step].isContainType(ImagesRes.HOLE_MARK)?(this.currentIndex+=this.step,this.timeMove=this.SPEED,b.currentTween=createjs.Tween.get(this).to({x:this.grid[this.currentIndex].x,y:this.grid[this.currentIndex].y},this.timeMove,createjs.Ease.linear),1!=this.directionX&&1!=this.directionY||this.grid[this.currentIndex].setIndex(this),this.currentState=b.FALL,this.changeView()):this.idle()};b.prototype.moveIdle=function(){this.partner.state==b.MOVE_IDLE?this.partner.stopMoveIdle():(this.currentState=b.MOVE_IDLE, this.changeView())};b.prototype.stopMoveIdle=function(){this.currentState=b.IDLE;this.changeView()};b.prototype.die=function(a){this.parent.removeChildAt(this.parent.getNumChildren()-1);this.view.stop();this.dispatchEvent(new GameEvent(GameEvent.RESTART,!0))};b.prototype.activate=function(){this.arrows.x=this.x+this.view.x+10;this.arrows.y=this.y+this.view.y+65;this.lastStateIsActive=this.arrows.visible=!0};b.prototype.deactivate=function(){this.lastStateIsActive=this.arrows.visible=!1};b.prototype.destroy= function(){this.removeAllEventListeners();createjs.Tween.removeTweens(this);this.removeAllChildren();this.pointMove=null;b.currentTween=null;this.view=b.currentView=null};Object.defineProperty(b.prototype,"index",{get:function(){return this.currentIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return this.currentState},enumerable:!0,configurable:!0});b.prototype.getAnimation=function(a){if(this.type==ImagesRes.HERO+0)switch(a){case b.IDLE:return[JSONRes.atlas0, ImagesRes.A0_BOY_IDLE];case b.MOVE:return[JSONRes.atlas0,ImagesRes.A0_BOY_MOVE];case b.FALL:return[JSONRes.atlas0,ImagesRes.A0_BOY_FALL]}else switch(a){case b.IDLE:return[JSONRes.atlas1,ImagesRes.A1_GIRL_IDLE];case b.MOVE:return[JSONRes.atlas0,ImagesRes.A0_GIRL_MOVE];case b.FALL:return[JSONRes.atlas1,ImagesRes.A1_GIRL_FALL]}return["incorrect","animation"]};b.prototype.isActive=function(){return this.arrows.visible};b.prototype.setPartner=function(a){this.partner=a};b.prototype.setIdleCallback=function(a){this.callbackIdle= a};b.IDLE="idle";b.MOVE="move";b.MOVE_IDLE="moveIdle";b.FALL="fall";return b}(createjs.Container),Press=function(){function a(a,c,e){this.view=a;this.index=c;this.type=e}a.prototype.turnOff=function(){this.view.image=ImagesRes.getImage(ImagesRes.PRESS+1)};return a}(),Barrier=function(){function a(a,c,e){this.view=a;this.index=c;this.type=e;a.stop()}a.prototype.turnOff=function(){var a=this.view;a.gotoAndPlay(ImagesRes.A0_BARRIER);a.framerate=20;a.on(GameEvent.ANIMATION_COMPLETE,this.completeHandler, this)};a.prototype.completeHandler=function(a){this.view.removeAllEventListeners();this.view.stop()};return a}(),Star=function(){return function(a,b,c){this.view=a;this.index=b;this.type=c}}(),Button=function(a){function b(b,e,d,f){"undefined"===typeof d&&(d="");"undefined"===typeof f&&(f="");a.call(this);this.snapToPixel=this.currentState=!0;this.typeOver=e;this.typeOut=b;this.typeOverOff=f;this.typeOutOff=d;b=ImagesRes.getImage(b);this.width=b.width;this.height=b.height;this.bitmap=new createjs.Bitmap(b); this.addChild(this.bitmap);this.on(GUIEvent.MOUSE_DOWN,this.overHandler,this);this.on(GUIEvent.MOUSE_UP,this.outHandler,this);""!=d&&(this.on(GUIEvent.MOUSE_CLICK,this.clickHandler,this),this.setState(),SoundManager.instance.setCurrentButton(this))}__extends(b,a);b.prototype.overHandler=function(a){"undefined"===typeof a&&(a=null);a&&a.stopPropagation();a=this.bitmap.image.width;var b=this.bitmap.image.height,d=ImagesRes.getImage(this.currentState?this.typeOver:this.typeOverOff);this.bitmap.image= d;this.bitmap.x=a-d.width>>1;this.bitmap.y=b-d.height>>1};b.prototype.outHandler=function(a){"undefined"===typeof a&&(a=null);a&&a.stopPropagation();this.bitmap.image=ImagesRes.getImage(this.currentState?this.typeOut:this.typeOutOff);this.bitmap.x=0;this.bitmap.y=0};b.prototype.clickHandler=function(a){this.currentState=!this.currentState;this.outHandler();SoundManager.instance.muteOnOff()};b.prototype.setState=function(){this.currentState=SoundManager.instance.getIsMusic();this.outHandler()};b.prototype.clasp= function(a){createjs.Tween.get(this,{ignoreGlobalPause:!0}).wait(a).to({scaleX:.95,scaleY:1.05},600,createjs.Ease.quadInOut).call(this.unclasp,[],this)};b.prototype.unclasp=function(){createjs.Tween.get(this,{ignoreGlobalPause:!0}).to({scaleX:1.05,scaleY:.95},600,createjs.Ease.quadInOut).call(this.clasp,[0],this)};return b}(createjs.Container),LevelButton=function(a){function b(b,e){a.call(this,ImagesRes.BUTTON_LS,ImagesRes.BUTTON_LS_OVER);var d=new createjs.BitmapText(b.toString(),JSONRes.atlasLevelsFont); this.addChild(d);d.mouseEnabled=!1;d.snapToPixel=!0;d.regX=d.getBounds().width>>1;d.regY=d.getBounds().height>>1;d.x=this.width>>1;d.y=31;this.tf=d;this.starsOut=new createjs.Container;this.starsOver=new createjs.Container;this.addChild(this.starsOut);this.addChild(this.starsOver);this.starsOut.x=18;this.starsOut.y=60;this.starsOver.x=15;this.starsOver.y=61;this.starsOver.visible=!1;for(var f=0;f<e;f++)d=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.LS_STAR)),this.starsOut.addChild(d),d.x=18*f, 1==f&&(d.y=7),d=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.LS_STAR_OVER)),this.starsOver.addChild(d),d.x=19*f,1==f&&(d.y=7)}__extends(b,a);b.prototype.overHandler=function(){a.prototype.overHandler.call(this);this.tf.scaleX=this.tf.scaleY=1.2;this.starsOver.visible=!0;this.starsOut.visible=!1};b.prototype.outHandler=function(){a.prototype.outHandler.call(this);this.tf.scaleX=this.tf.scaleY=1;this.starsOver.visible=!1;this.starsOut.visible=!0};return b}(Button),ImagesRes=function(){function a(){} a.init=function(){var b=[{src:"images/ui/Flag.png",id:a.HELP_POINTER},{src:"images/ui/Help-0.png",id:a.HELP+"0"},{src:"images/ui/Help-1.png",id:a.HELP+"1"},{src:"images/ui/Help-2.png",id:a.HELP+"2"},{src:"images/ui/Help-3.png",id:a.HELP+"3"},{src:"images/ui/Help-4.png",id:a.HELP+"4"},{src:"images/tiles/Arrow.png",id:a.HERO_ARROW},{src:"images/tiles/Field.png",id:a.GAME_FIELD},{src:"images/ui/LevelComplete.png",id:a.VICTORY_TITLE},{src:"images/ui/StarLC.png",id:a.STAR_VICTORY},{src:"images/ui/StarLS.png", id:a.LS_STAR},{src:"images/ui/StarLSActiv.png",id:a.LS_STAR_OVER},{src:"images/ui/MainBack.png",id:a.MAIN_BG},{src:"images/ui/CreditsBack.png",id:a.CREDITS_BG},{src:"images/ui/LSBack.png",id:a.LEVEL_SELECT_BG},{src:"images/ui/GameBg.png",id:a.GAME_BG},{src:"images/ui/IntroBack.png",id:a.INTRO_BG},{src:"images/ui/GameComplete.png",id:a.GAME_COMPLETE_BG},{src:"images/ui/oops.png",id:a.OOPS},{src:"images/ui/Intro-0.png",id:a.INTRO_ICON+"0"},{src:"images/ui/Intro-1.png",id:a.INTRO_ICON+"1"},{src:"images/ui/Intro-2.png", id:a.INTRO_ICON+"2"},{src:"music/menu.ogg",type:createjs.LoadQueue.SOUND,id:SoundManager.MUSIC_MENU},{src:"music/game.ogg",type:createjs.LoadQueue.SOUND,id:SoundManager.MUSIC_GAME},{src:"images/ui/ButtonCredits.png",id:a.BUTTON_CREDITS},{src:"images/animations/atlas0.png",id:"atlas0"},{src:"images/animations/atlas1.png",id:"atlas1"},{src:"images/ui/ButtonCreditsActiv.png",id:a.BUTTON_CREDITS_OVER},{src:"images/ui/ButtonMoreGames.png",id:a.BUTTON_MORE},{src:"images/ui/ButtonMoreGamesActiv.png",id:a.BUTTON_MORE_OVER}, {src:"images/ui/ButtonPlay.png",id:a.BUTTON_PLAY},{src:"images/ui/ButtonPlayActiv.png",id:a.BUTTON_PLAY_OVER},{src:"images/ui/ButtonSoundOn.png",id:a.BUTTON_SOUND_ON},{src:"images/ui/ButtonSoundOnActiv.png",id:a.BUTTON_SOUND_ON_OVER},{src:"images/ui/ButtonSoundOff.png",id:a.BUTTON_SOUND_OFF},{src:"images/ui/ButtonSoundOffActiv.png",id:a.BUTTON_SOUND_OFF_OVER},{src:"images/ui/ButtonPlayLC.png",id:a.BUTTON_PLAY_PRE},{src:"images/ui/ButtonPlayLCActiv.png",id:a.BUTTON_PLAY_PRE_OVER},{src:"images/ui/ButtonBack.png", id:a.BUTTON_BACK},{src:"images/ui/ButtonBackActiv.png",id:a.BUTTON_BACK_OVER},{src:"images/ui/ButtonLS.png",id:a.BUTTON_LS},{src:"images/ui/ButtonLSActiv.png",id:a.BUTTON_LS_OVER},{src:"images/ui/ButtonLSLock.png",id:a.BUTTON_LS_LOCK},{src:"images/ui/ButtonGameMenu.png",id:a.BUTTON_MENU},{src:"images/ui/ButtonGameMenuActiv.png",id:a.BUTTON_MENU_OVER},{src:"images/ui/ButtonMenuLC.png",id:a.BUTTON_MENU_BIG},{src:"images/ui/ButtonMenuLCActiv.png",id:a.BUTTON_MENU_BIG_OVER},{src:"images/ui/ButtonGameRestart.png", id:a.BUTTON_RESET},{src:"images/ui/ButtonGameRestartActiv.png",id:a.BUTTON_RESET_OVER},{src:"images/ui/ButtonRestartLC.png",id:a.BUTTON_RESET_BIG},{src:"images/ui/ButtonRestartLCActiv.png",id:a.BUTTON_RESET_BIG_OVER},{src:"images/tiles/Boy.png",id:a.HERO+"0"},{src:"images/tiles/Girl.png",id:a.HERO+"1"},{src:"images/tiles/Lego-0.png",id:a.LEGO+"0"},{src:"images/tiles/Lego-1.png",id:a.LEGO+"1"},{src:"images/tiles/Lego-2.png",id:a.LEGO+"2"},{src:"images/tiles/Lego-3.png",id:a.LEGO+"3"},{src:"images/tiles/Lego-4.png", id:a.LEGO+"4"},{src:"images/tiles/Lego-5.png",id:a.LEGO+"5"},{src:"images/tiles/Lego-6.png",id:a.LEGO+"6"},{src:"images/tiles/Lego-7.png",id:a.LEGO+"7"},{src:"images/tiles/Lego-8.png",id:a.LEGO+"8"},{src:"images/tiles/Lego-9.png",id:a.LEGO+"9"},{src:"images/tiles/Lego-10.png",id:a.LEGO+"10"},{src:"images/tiles/Lego-11.png",id:a.LEGO+"11"},{src:"images/tiles/Lego-12.png",id:a.LEGO+"12"},{src:"images/tiles/Lego-13.png",id:a.LEGO+"13"},{src:"images/tiles/Lego-14.png",id:a.LEGO+"14"},{src:"images/tiles/Lego-15.png", id:a.LEGO+"15"},{src:"images/tiles/Lego-16.png",id:a.LEGO+"16"},{src:"images/tiles/Lego-17.png",id:a.LEGO+"17"},{src:"images/tiles/Button-Up.png",id:a.PRESS+"0"},{src:"images/tiles/Button-Down.png",id:a.PRESS+"1"},{src:"images/tiles/Gaika-0.png",id:a.NUT+"0"},{src:"images/tiles/Gaika-1.png",id:a.NUT+"1"},{src:"images/tiles/Lastik.png",id:a.ERASER},{src:"images/tiles/Pencel-0.png",id:a.PENCIL+"0"},{src:"images/tiles/Pencel-1.png",id:a.PENCIL+"1"},{src:"images/tiles/Pencel-2.png",id:a.PENCIL+"2"},{src:"images/tiles/Pencel-3.png", id:a.PENCIL+"3"},{src:"images/tiles/Probka-0.png",id:a.CORK+"0"},{src:"images/tiles/Probka-1.png",id:a.CORK+"1"},{src:"images/tiles/Pugovica-0.png",id:a.STUD},{src:"images/tiles/Yama-0.png",id:a.HOLE+"0"},{src:"images/tiles/Yama-1.png",id:a.HOLE+"1"},{src:"images/tiles/Yama-2.png",id:a.HOLE+"2"},{src:"images/tiles/hole.png",id:a.HOLE_MARK},{src:"images/fonts/levels.png",id:"atlasLevelsFont"},{src:"images/fonts/game.png",id:"atlasGameFont"}];a.loader=new createjs.LoadQueue(!1,"",!0);a.loader.installPlugin(createjs.Sound); createjs.Sound.alternateExtensions=["m4a"];a.loader.loadManifest(b)};a.getImage=function(b){b=b.substr(0,7)==a.PENCIL2?a.PENCIL+b.substr(7,1):b;var c=0;a.numberImages[b]?(c=Math.floor(Math.random()*a.numberImages[b]),b=a.loader.getResult(b+c)):b=a.loader.getResult(b);return b};a.NONE="none";a.HERO="hero";a.LEGO="lego";a.HOLE="hole";a.HOLE_MARK="hmark";a.PRESS="press";a.NUT="nut";a.ERASER="eraser";a.PENCIL="pencil";a.PENCIL2="pencil9";a.CORK="cork";a.STUD="stud";a.STAR="star";a.BARRIER="barrier";a.DECOR= "Decor";a.HERO_ARROW="Arrow";a.MAIN_BG="MainBack";a.CREDITS_BG="GreditsBack";a.LEVEL_SELECT_BG="LSBack";a.GAME_BG="GameBack";a.INTRO_BG="IntroBack";a.GAME_COMPLETE_BG="GameComplete";a.PRELOADER_BG="PreloaderBG";a.GAME_FIELD="field";a.LS_STAR="StarLS";a.LS_STAR_OVER="StarLSActiv";a.INTRO_ICON="intro";a.ACHIEVEMENS_TITLE="Achievemens";a.VICTORY_TITLE="LevelComplete";a.STAR_VICTORY="StarLC";a.ICON_ACH="IconAch";a.RAYS_ACH="Luchi";a.HELP="help";a.HELP_POINTER="HelpPointer";a.OOPS="oops";a.BUTTON_CREDITS= "ButtonCredits";a.BUTTON_CREDITS_OVER="ButtonCreditsActiv";a.BUTTON_MORE="ButtonMoreGames";a.BUTTON_MORE_OVER="ButtonMoreGamesActiv";a.BUTTON_PLAY="ButtonPlay";a.BUTTON_PLAY_OVER="ButtonPlayActiv";a.BUTTON_SOUND_ON="ButtonSoundOn";a.BUTTON_SOUND_ON_OVER="ButtonSoundOnActiv";a.BUTTON_SOUND_OFF="ButtonSoundOff";a.BUTTON_SOUND_OFF_OVER="ButtonSoundOffActiv";a.BUTTON_PLAY_PRE="ButtonPlayPre";a.BUTTON_PLAY_PRE_OVER="ButtonPlayPreActiv";a.BUTTON_BACK="CreditsButtonBack";a.BUTTON_BACK_OVER="CreditsButtonBackActiv"; a.BUTTON_LS="ButtonLS";a.BUTTON_LS_OVER="ButtonLSActiv";a.BUTTON_LS_LOCK="ButtonLSLock";a.BUTTON_MENU="ButtonMenu";a.BUTTON_MENU_OVER="ButtonMenuActiv";a.BUTTON_MENU_BIG="ButtonMenuBig";a.BUTTON_MENU_BIG_OVER="ButtonMenuBigActiv";a.BUTTON_RESET="ButtonRestart";a.BUTTON_RESET_OVER="ButtonRestartActiv";a.BUTTON_RESET_BIG="ButtonRestartBig";a.BUTTON_RESET_BIG_OVER="ButtonRestartBigActiv";a.ACH_DISABLE="ButtonAch";a.ACH_ENABLE="ButtonAchActiv";a.A0_BOY_IDLE="MikeStand";a.A0_BOY_MOVE="MikeJump";a.A0_BOY_FALL= "MikeHole";a.A0_GIRL_MOVE="MiaJump";a.A0_BARRIER="Gate";a.A0_STAR="Star";a.A1_GIRL_IDLE="MiaStand";a.A1_GIRL_FALL="MiaHole";a.A1_STAR_GET="StarUp";a.numberImages={};return a}(),JSONRes=function(){function a(){}a.init=function(){a.levels.push(a.level0);a.levels.push(a.level1);a.levels.push(a.level2);a.levels.push(a.level3);a.levels.push(a.level4);a.levels.push(a.level5);a.levels.push(a.level6);a.levels.push(a.level7);a.levels.push(a.level8);a.levels.push(a.level9);a.levels.push(a.level10);a.levels.push(a.level11); a.levels.push(a.level12);a.levels.push(a.level13);a.levels.push(a.level14);a.levels.push(a.level15);a.levels.push(a.level16);a.levels.push(a.level17);a.levels.push(a.level18);a.levels.push(a.level19);a.atlas0=new createjs.SpriteSheet({images:[ImagesRes.loader.getResult("atlas0")],frames:[[0,0,100,200,0,0,0],[0,201,100,200,0,0,0],[0,402,100,200,0,0,0],[0,603,100,200,0,0,0],[0,804,100,200,0,0,0],[101,0,100,200,0,0,0],[101,201,100,200,0,0,0],[101,402,100,200,0,0,0],[101,603,100,200,0,0,0],[101,804,100, 200,0,0,0],[202,0,100,200,0,0,0],[202,201,100,200,0,0,0],[202,402,100,200,0,0,0],[202,603,100,200,0,0,0],[202,804,100,200,0,0,0],[303,0,100,200,0,0,0],[303,201,100,200,0,0,0],[303,402,100,200,0,0,0],[303,603,100,200,0,0,0],[303,804,100,200,0,0,0],[404,0,100,200,0,0,0],[404,201,100,200,0,0,0],[404,402,100,200,0,0,0],[404,603,100,200,0,0,0],[404,804,100,200,0,0,0],[505,0,100,200,0,0,0],[505,201,100,200,0,0,0],[505,402,100,200,0,0,0],[505,603,100,200,0,0,0],[505,804,100,200,0,0,0],[606,0,100,200,0,0, 0],[606,201,100,200,0,0,0],[606,402,100,200,0,0,0],[606,603,100,200,0,0,0],[606,804,100,200,0,0,0],[707,0,100,200,0,0,0],[707,201,100,200,0,0,0],[707,402,100,200,0,0,0],[707,603,100,200,0,0,0],[707,804,100,200,0,0,0],[808,0,100,200,0,0,0],[808,201,100,200,0,0,0],[808,402,100,200,0,0,0],[808,603,100,200,0,0,0],[808,804,100,200,0,0,0],[303,0,100,200,0,0,0],[303,201,100,200,0,0,0],[303,402,100,200,0,0,0],[303,603,100,200,0,0,0],[303,804,100,200,0,0,0],[404,0,100,200,0,0,0],[404,201,100,200,0,0,0],[404, 402,100,200,0,0,0],[404,603,100,200,0,0,0],[404,804,100,200,0,0,0],[505,0,100,200,0,0,0],[505,201,100,200,0,0,0],[505,402,100,200,0,0,0],[505,603,100,200,0,0,0],[505,804,100,200,0,0,0],[909,0,100,200,0,0,0],[909,201,100,200,0,0,0],[909,402,100,200,0,0,0],[909,603,100,200,0,0,0],[909,804,100,200,0,0,0],[1010,0,100,200,0,0,0],[1010,201,100,200,0,0,0],[1010,402,100,200,0,0,0],[1010,603,100,200,0,0,0],[1010,804,100,200,0,0,0],[1111,0,100,200,0,0,0],[1111,201,100,200,0,0,0],[1111,402,100,200,0,0,0],[1111, 603,100,200,0,0,0],[1111,804,100,200,0,0,0],[909,0,100,200,0,0,0],[1212,0,100,200,0,0,0],[1212,201,100,200,0,0,0],[1212,402,100,200,0,0,0],[1212,603,100,200,0,0,0],[1212,804,100,200,0,0,0],[1010,201,100,200,0,0,0],[1313,0,100,200,0,0,0],[1414,0,100,200,0,0,0],[1515,0,100,200,0,0,0],[1616,0,100,200,0,0,0],[1717,0,100,200,0,0,0],[1818,0,100,200,0,0,0],[1919,0,100,200,0,0,0],[1313,201,100,200,0,0,0],[1313,402,100,200,0,0,0],[1313,603,100,200,0,0,0],[1313,804,100,200,0,0,0],[1414,201,100,200,0,0,0],[1414, 402,100,200,0,0,0],[1414,603,100,200,0,0,0],[1414,804,100,200,0,0,0],[1515,201,100,200,0,0,0],[1616,201,100,200,0,0,0],[1717,201,100,200,0,0,0],[1818,201,100,200,0,0,0],[1919,201,100,200,0,0,0],[1515,402,100,200,0,0,0],[1515,603,100,200,0,0,0],[1515,804,100,200,0,0,0],[1616,402,80,130,0,0,0],[1697,402,80,130,0,0,0],[1778,402,80,130,0,0,0],[1859,402,80,130,0,0,0],[1940,402,80,130,0,0,0],[1616,533,48,84,0,0,0],[1616,618,48,84,0,0,0],[1616,703,48,84,0,0,0],[1616,788,48,84,0,0,0],[1616,873,48,84,0,0, 0],[1665,533,48,84,0,0,0],[1714,533,48,84,0,0,0],[1763,533,48,84,0,0,0],[1812,533,48,84,0,0,0],[1861,533,48,84,0,0,0],[1910,533,48,84,0,0,0],[1959,533,48,84,0,0,0],[1665,618,48,84,0,0,0],[1665,703,48,84,0,0,0],[1665,788,48,84,0,0,0],[1665,873,48,84,0,0,0],[1714,618,48,84,0,0,0],[1714,703,48,84,0,0,0],[1714,788,48,84,0,0,0],[1714,873,48,84,0,0,0],[1763,618,48,84,0,0,0],[1812,618,48,84,0,0,0],[1861,618,48,84,0,0,0],[1910,618,48,84,0,0,0],[1959,618,48,84,0,0,0],[1763,703,48,84,0,0,0],[1763,788,48,84, 0,0,0],[1763,873,48,84,0,0,0],[1812,703,48,84,0,0,0],[1861,703,48,84,0,0,0]],animations:{MikeStand:[0,59,!0],MikeJump:[60,74,!0],MikeHole:[75,89,!1],MiaJump:[90,104,!0],Gate:[105,109,!0],Star:[110,139,!0]}});a.atlas1=new createjs.SpriteSheet({images:[ImagesRes.loader.getResult("atlas1")],frames:[[0,0,100,200,0,0,0],[0,201,100,200,0,0,0],[0,402,100,200,0,0,0],[0,603,100,200,0,0,0],[0,804,100,200,0,0,0],[101,0,100,200,0,0,0],[101,201,100,200,0,0,0],[101,402,100,200,0,0,0],[101,603,100,200,0,0,0],[101, 804,100,200,0,0,0],[202,0,100,200,0,0,0],[202,201,100,200,0,0,0],[202,402,100,200,0,0,0],[202,603,100,200,0,0,0],[202,804,100,200,0,0,0],[303,0,100,200,0,0,0],[303,201,100,200,0,0,0],[202,603,100,200,0,0,0],[303,402,100,200,0,0,0],[303,603,100,200,0,0,0],[303,804,100,200,0,0,0],[404,0,100,200,0,0,0],[404,201,100,200,0,0,0],[404,402,100,200,0,0,0],[404,603,100,200,0,0,0],[404,804,100,200,0,0,0],[505,0,100,200,0,0,0],[505,201,100,200,0,0,0],[0,402,100,200,0,0,0],[505,402,100,200,0,0,0],[0,0,100,200, 0,0,0],[505,603,100,200,0,0,0],[505,804,100,200,0,0,0],[606,0,100,200,0,0,0],[606,201,100,200,0,0,0],[606,402,100,200,0,0,0],[606,603,100,200,0,0,0],[606,804,100,200,0,0,0],[707,0,100,200,0,0,0],[707,201,100,200,0,0,0],[707,402,100,200,0,0,0],[707,603,100,200,0,0,0],[707,804,100,200,0,0,0],[808,0,100,200,0,0,0],[808,201,100,200,0,0,0],[303,0,100,200,0,0,0],[303,201,100,200,0,0,0],[202,603,100,200,0,0,0],[303,402,100,200,0,0,0],[303,603,100,200,0,0,0],[303,804,100,200,0,0,0],[404,0,100,200,0,0,0], [404,201,100,200,0,0,0],[404,402,100,200,0,0,0],[404,603,100,200,0,0,0],[404,804,100,200,0,0,0],[505,0,100,200,0,0,0],[505,201,100,200,0,0,0],[0,402,100,200,0,0,0],[505,402,100,200,0,0,0],[808,402,100,200,0,0,0],[808,603,100,200,0,0,0],[808,804,100,200,0,0,0],[909,0,100,200,0,0,0],[909,201,100,200,0,0,0],[909,402,100,200,0,0,0],[909,603,100,200,0,0,0],[909,804,100,200,0,0,0],[1010,0,100,200,0,0,0],[1010,201,100,200,0,0,0],[1010,402,100,200,0,0,0],[1010,603,100,200,0,0,0],[1010,804,100,200,0,0,0], [1111,0,100,200,0,0,0],[1111,201,100,200,0,0,0],[1111,402,72,84,0,0,0],[1111,402,72,84,0,0,0],[1111,487,72,84,0,0,0],[1111,572,72,84,0,0,0],[1111,657,72,84,0,0,0],[1111,742,72,84,0,0,0],[1111,827,72,84,0,0,0],[1111,912,72,84,0,0,0],[1184,402,72,84,0,0,0],[1212,0,72,84,0,0,0],[1212,85,72,84,0,0,0],[1212,170,72,84,0,0,0],[1212,255,72,84,0,0,0],[1184,487,72,84,0,0,0],[1184,572,72,84,0,0,0],[1184,657,72,84,0,0,0]],animations:{MiaStand:[0,59,!0],MiaHole:[60,74,!1],StarUp:[75,90,!0]}});a.atlasLevelsFont= new createjs.SpriteSheet({images:[ImagesRes.loader.getResult("atlasLevelsFont")],frames:[[0,0,31,39,0,0,0],[32,0,22,38,0,0,0],[55,0,28,38,0,0,0],[84,0,28,38,0,0,0],[0,40,30,39,0,0,0],[31,40,28,39,0,0,0],[60,40,31,39,0,0,0],[92,40,29,39,0,0,0],[0,80,31,39,0,0,0],[32,80,31,39,0,0,0]],animations:{0:[0,0,!0],1:[1,1,!0],2:[2,2,!0],3:[3,3,!0],4:[4,4,!0],5:[5,5,!0],6:[6,6,!0],7:[7,7,!0],8:[8,8,!0],9:[9,9,!0]}});a.atlasGameFont=new createjs.SpriteSheet({images:[ImagesRes.loader.getResult("atlasGameFont")], frames:[[0,0,39,53,0,0,0],[40,0,22,52,0,0,0],[63,0,34,51,0,0,0],[98,0,34,53,0,0,0],[133,0,38,52,0,0,0],[172,0,38,54,0,0,0],[211,0,40,53,0,0,0],[0,55,36,53,0,0,0],[37,55,40,55,0,0,0],[78,55,39,53,0,0,0]],animations:{0:[0,0,!0],1:[1,1,!0],2:[2,2,!0],3:[3,3,!0],4:[4,4,!0],5:[5,5,!0],6:[6,6,!0],7:[7,7,!0],8:[8,8,!0],9:[9,9,!0]}})};a.levels=[];a.levelFromEditor=null;a.level0=[{index:0,types:["Arrow"]},{index:1,types:["Arrow"]},{index:2,types:["Arrow"]},{index:3,types:["Arrow"]},{index:4,types:["Arrow"]}, {index:5,types:["pencil0","Arrow"]},{index:11,types:["stud","Arrow"]},{index:23,types:["lego4","Arrow"]},{index:27,types:["star"]},{index:41,types:["star"]},{index:43,types:["lego15","Arrow"]},{index:44,types:["Arrow"]},{index:46,types:["star"]},{index:52,types:["lego11","Arrow"]},{index:60,types:["Arrow"]},{index:65,types:["hero0"]},{index:68,types:["lego0","Arrow"]},{index:70,types:["hero1"]}];a.level1=[{index:3,types:["nut0","Arrow"]},{index:4,types:["star"]},{index:9,types:["hero1"]},{index:11, types:["cork0","Arrow"]},{index:12,types:["Arrow"]},{index:14,types:["hero0"]},{index:19,types:["Arrow"]},{index:20,types:["Arrow"]},{index:27,types:["star"]},{index:28,types:["lego2","Arrow"]},{index:33,types:["lego4","Arrow"]},{index:35,types:["lego15","Arrow"]},{index:36,types:["Arrow"]},{index:41,types:["star"]},{index:44,types:["lego8","Arrow"]},{index:45,types:["lego16","Arrow"]},{index:46,types:["Arrow"]},{index:52,types:["Arrow"]},{index:64,types:["Arrow"]},{index:65,types:["Arrow"]},{index:66, types:["Arrow"]},{index:67,types:["Arrow"]},{index:68,types:["Arrow"]},{index:69,types:["Arrow"]},{index:70,types:["Arrow"]},{index:71,types:["pencil2","Arrow"]}];a.level2=[{index:1,types:["star"]},{index:2,types:["stud","Arrow"]},{index:9,types:["lego14","Arrow"]},{index:10,types:["Arrow"]},{index:12,types:["eraser","Arrow"]},{index:13,types:["Arrow"]},{index:14,types:["Arrow"]},{index:20,types:["Arrow"]},{index:21,types:["Arrow"]},{index:22,types:["Arrow"]},{index:25,types:["lego0","Arrow"]},{index:26, types:["lego16","Arrow"]},{index:27,types:["Arrow"]},{index:28,types:["cork1","Arrow"]},{index:29,types:["Arrow"]},{index:36,types:["Arrow"]},{index:37,types:["Arrow"]},{index:41,types:["hero1"]},{index:44,types:["lego7","Arrow"]},{index:46,types:["hero0"]},{index:48,types:["Arrow"]},{index:49,types:["Arrow"]},{index:50,types:["Arrow"]},{index:51,types:["pencil1","Arrow"]},{index:52,types:["lego17","Arrow"]},{index:53,types:["Arrow"]},{index:61,types:["star"]},{index:65,types:["star"]},{index:67, types:["lego1","Arrow"]}];a.level3=[{index:3,types:["stud","Arrow"]},{index:15,types:["star"]},{index:19,types:["lego10","Arrow"]},{index:21,types:["pencil91","Arrow"]},{index:22,types:["Arrow"]},{index:23,types:["Arrow"]},{index:25,types:["hole0","hmark"]},{index:27,types:["Arrow"]},{index:35,types:["star"]},{index:36,types:["lego9","Arrow"]},{index:44,types:["Arrow"]},{index:49,types:["lego1","Arrow"]},{index:50,types:["lego2","Arrow"]},{index:51,types:["nut1","Arrow"]},{index:52,types:["star"]}, {index:59,types:["eraser","Arrow"]},{index:60,types:["Arrow"]},{index:61,types:["Arrow"]},{index:65,types:["hero0"]},{index:67,types:["Arrow"]},{index:68,types:["Arrow"]},{index:69,types:["Arrow"]},{index:70,types:["hero1"]}];a.level4=[{index:4,types:["lego8","Arrow"]},{index:9,types:["hero0"]},{index:12,types:["Arrow"]},{index:14,types:["hero1"]},{index:16,types:["Arrow"]},{index:17,types:["pencil1","Arrow"]},{index:19,types:["lego15","Arrow"]},{index:20,types:["Arrow"]},{index:27,types:["cork0", "Arrow"]},{index:28,types:["Arrow"]},{index:30,types:["pencil92","Arrow"]},{index:31,types:["Arrow"]},{index:32,types:["star"]},{index:33,types:["hole0","hmark"]},{index:35,types:["Arrow"]},{index:36,types:["Arrow"]},{index:43,types:["nut0","Arrow"]},{index:46,types:["hole0","hmark"]},{index:47,types:["star"]},{index:58,types:["lego17","Arrow"]},{index:59,types:["Arrow"]},{index:60,types:["lego11","Arrow"]},{index:67,types:["star"]},{index:68,types:["Arrow"]}];a.level5=[{index:2,types:["lego0","Arrow"]}, {index:5,types:["lego9","Arrow"]},{index:8,types:["hero0"]},{index:13,types:["Arrow"]},{index:15,types:["hero1"]},{index:18,types:["lego11","Arrow"]},{index:20,types:["lego12","Arrow"]},{index:24,types:["cork0","Arrow"]},{index:25,types:["Arrow"]},{index:26,types:["Arrow"]},{index:28,types:["Arrow"]},{index:30,types:["cork1","Arrow"]},{index:31,types:["Arrow"]},{index:32,types:["Arrow"]},{index:33,types:["Arrow"]},{index:36,types:["lego4","Arrow"]},{index:38,types:["Arrow"]},{index:39,types:["Arrow"]}, {index:41,types:["star"]},{index:43,types:["lego15","Arrow"]},{index:44,types:["Arrow"]},{index:49,types:["hole0","hmark"]},{index:53,types:["hole1","hmark"]},{index:54,types:["hmark"]},{index:56,types:["Arrow"]},{index:57,types:["Arrow"]},{index:58,types:["pencil0","Arrow"]},{index:64,types:["star"]},{index:69,types:["star"]},{index:70,types:["nut0","Arrow"]}];a.level6=[{index:0,types:["star"]},{index:5,types:["nut1","Arrow"]},{index:8,types:["Arrow"]},{index:9,types:["pencil0","Arrow"]},{index:19, types:["star"]},{index:20,types:["hole1","hmark"]},{index:21,types:["hmark"]},{index:25,types:["nut0","Arrow"]},{index:27,types:["lego12","Arrow"]},{index:35,types:["Arrow"]},{index:37,types:["pencil91","Arrow"]},{index:38,types:["Arrow"]},{index:39,types:["Arrow"]},{index:43,types:["hole0","hmark"]},{index:49,types:["lego15","Arrow"]},{index:50,types:["Arrow"]},{index:51,types:["star"]},{index:52,types:["lego14","Arrow"]},{index:53,types:["Arrow"]},{index:60,types:["lego8","Arrow"]},{index:65,types:["hero0"]}, {index:68,types:["Arrow"]},{index:70,types:["hero1"]}];a.level7=[{index:3,types:["star"]},{index:4,types:["lego4","Arrow"]},{index:11,types:["lego14","Arrow"]},{index:12,types:["Arrow"]},{index:15,types:["star"]},{index:19,types:["barrier"]},{index:22,types:["hole1","hmark"]},{index:23,types:["hmark"]},{index:24,types:["press0"]},{index:27,types:["lego3","Arrow"]},{index:35,types:["cork1","Arrow"]},{index:36,types:["Arrow"]},{index:41,types:["hole0","hmark"]},{index:43,types:["Arrow"]},{index:44, types:["Arrow"]},{index:51,types:["lego2","Arrow"]},{index:52,types:["star"]},{index:59,types:["eraser","Arrow"]},{index:60,types:["Arrow"]},{index:61,types:["Arrow"]},{index:65,types:["hero0"]},{index:67,types:["Arrow"]},{index:68,types:["Arrow"]},{index:69,types:["Arrow"]},{index:70,types:["hero1"]}];a.level8=[{index:2,types:["cork0","Arrow"]},{index:3,types:["Arrow"]},{index:9,types:["hero1"]},{index:10,types:["Arrow"]},{index:11,types:["Arrow"]},{index:14,types:["hero0"]},{index:19,types:["lego8", "Arrow"]},{index:22,types:["pencil91","Arrow"]},{index:23,types:["Arrow"]},{index:27,types:["Arrow"]},{index:29,types:["hole0","hmark"]},{index:31,types:["star"]},{index:33,types:["hole0","hmark"]},{index:35,types:["barrier"]},{index:43,types:["lego13","Arrow"]},{index:44,types:["stud","Arrow"]},{index:46,types:["hole0","hmark"]},{index:51,types:["Arrow"]},{index:52,types:["star"]},{index:58,types:["lego17","Arrow"]},{index:59,types:["Arrow"]},{index:62,types:["press0"]},{index:66,types:["star"]}, {index:67,types:["lego16","Arrow"]},{index:68,types:["Arrow"]}];a.level9=[{index:1,types:["star"]},{index:3,types:["lego12","Arrow"]},{index:9,types:["hole0","hmark"]},{index:11,types:["Arrow"]},{index:15,types:["press0"]},{index:21,types:["pencil91","Arrow"]},{index:22,types:["Arrow"]},{index:23,types:["Arrow"]},{index:24,types:["Arrow"]},{index:25,types:["Arrow"]},{index:26,types:["pencil0","Arrow"]},{index:29,types:["barrier"]},{index:31,types:["star"]},{index:37,types:["lego4","Arrow"]},{index:39, types:["hole0","hmark"]},{index:42,types:["lego3","Arrow"]},{index:44,types:["lego11","Arrow"]},{index:52,types:["Arrow"]},{index:57,types:["lego1","Arrow"]},{index:58,types:["hero0"]},{index:59,types:["cork1","Arrow"]},{index:60,types:["Arrow"]},{index:61,types:["hero1"]},{index:62,types:["lego2","Arrow"]},{index:65,types:["star"]},{index:66,types:["hole0","hmark"]},{index:67,types:["Arrow"]},{index:68,types:["Arrow"]}];a.level10=[{index:0,types:["star"]},{index:1,types:["hole0","hmark"]},{index:3, types:["lego8","Arrow"]},{index:9,types:["hero0"]},{index:11,types:["Arrow"]},{index:14,types:["hero1"]},{index:16,types:["lego1","Arrow"]},{index:19,types:["lego15","Arrow"]},{index:20,types:["Arrow"]},{index:21,types:["hole0","hmark"]},{index:23,types:["lego2","Arrow"]},{index:24,types:["star"]},{index:25,types:["barrier"]},{index:29,types:["lego11","Arrow"]},{index:32,types:["Arrow"]},{index:33,types:["Arrow"]},{index:34,types:["Arrow"]},{index:35,types:["pencil3","Arrow"]},{index:36,types:["barrier"]}, {index:37,types:["Arrow"]},{index:45,types:["lego3","Arrow"]},{index:47,types:["hole0","hmark"]},{index:50,types:["eraser","Arrow"]},{index:51,types:["Arrow"]},{index:52,types:["Arrow"]},{index:55,types:["star"]},{index:58,types:["Arrow"]},{index:59,types:["Arrow"]},{index:60,types:["Arrow"]},{index:62,types:["pencil90","Arrow"]},{index:63,types:["Arrow"]},{index:71,types:["press0"]}];a.level11=[{index:0,types:["star"]},{index:2,types:["lego8","Arrow"]},{index:4,types:["lego9","Arrow"]},{index:8, types:["nut0","Arrow"]},{index:10,types:["Arrow"]},{index:11,types:["hero1"]},{index:12,types:["Arrow"]},{index:14,types:["press0"]},{index:18,types:["lego6","Arrow"]},{index:20,types:["lego10","Arrow"]},{index:26,types:["barrier"]},{index:28,types:["Arrow"]},{index:30,types:["hole1","hmark"]},{index:31,types:["hmark"]},{index:33,types:["hole0","hmark"]},{index:34,types:["lego11","Arrow"]},{index:35,types:["lego14","Arrow"]},{index:36,types:["Arrow"]},{index:41,types:["star"]},{index:42,types:["Arrow"]}, {index:43,types:["hero0"]},{index:44,types:["lego2","Arrow"]},{index:47,types:["stud","Arrow"]},{index:49,types:["hole0","hmark"]},{index:50,types:["lego12","Arrow"]},{index:58,types:["Arrow"]},{index:60,types:["lego13","Arrow"]},{index:62,types:["hole0","hmark"]},{index:66,types:["barrier"]},{index:68,types:["Arrow"]},{index:70,types:["star"]}];a.level12=[{index:6,types:["hero1"]},{index:9,types:["pencil91","Arrow"]},{index:10,types:["Arrow"]},{index:11,types:["Arrow"]},{index:12,types:["Arrow"]}, {index:13,types:["Arrow"]},{index:14,types:["Arrow"]},{index:15,types:["Arrow"]},{index:20,types:["press0"]},{index:21,types:["barrier"]},{index:22,types:["star"]},{index:24,types:["lego9","Arrow"]},{index:26,types:["hole2","hmark"]},{index:27,types:["hmark"]},{index:28,types:["hmark"]},{index:29,types:["lego17","Arrow"]},{index:30,types:["Arrow"]},{index:32,types:["Arrow"]},{index:35,types:["barrier"]},{index:36,types:["star"]},{index:38,types:["barrier"]},{index:44,types:["lego1","Arrow"]},{index:46, types:["hole0","hmark"]},{index:48,types:["star"]},{index:49,types:["hole2","hmark"]},{index:50,types:["hmark"]},{index:51,types:["hmark"]},{index:56,types:["Arrow"]},{index:57,types:["Arrow"]},{index:58,types:["Arrow"]},{index:59,types:["Arrow"]},{index:60,types:["Arrow"]},{index:61,types:["Arrow"]},{index:62,types:["pencil2","Arrow"]},{index:65,types:["hero0"]}];a.level13=[{index:8,types:["pencil0","Arrow"]},{index:9,types:["hero1"]},{index:11,types:["eraser","Arrow"]},{index:12,types:["Arrow"]}, {index:13,types:["Arrow"]},{index:16,types:["Arrow"]},{index:17,types:["pencil1","Arrow"]},{index:18,types:["star"]},{index:19,types:["Arrow"]},{index:20,types:["Arrow"]},{index:21,types:["Arrow"]},{index:24,types:["Arrow"]},{index:25,types:["Arrow"]},{index:26,types:["pencil2","Arrow"]},{index:27,types:["hole2","hmark"]},{index:28,types:["hmark"]},{index:29,types:["hmark"]},{index:31,types:["hole0","hmark"]},{index:32,types:["Arrow"]},{index:33,types:["Arrow"]},{index:34,types:["Arrow"]},{index:35, types:["pencil3","Arrow"]},{index:36,types:["star"]},{index:37,types:["stud","Arrow"]},{index:42,types:["lego8","Arrow"]},{index:50,types:["Arrow"]},{index:52,types:["hole1","hmark"]},{index:53,types:["hmark"]},{index:54,types:["lego6","Arrow"]},{index:57,types:["hero0"]},{index:58,types:["barrier"]},{index:62,types:["press0"]},{index:64,types:["hole0","hmark"]},{index:65,types:["star"]},{index:66,types:["lego5","Arrow"]}];a.level14=[{index:0,types:["hero1"]},{index:8,types:["Arrow"]},{index:9,types:["Arrow"]}, {index:10,types:["pencil0","Arrow"]},{index:11,types:["star"]},{index:12,types:["hole0","hmark"]},{index:14,types:["lego10","Arrow"]},{index:16,types:["Arrow"]},{index:17,types:["Arrow"]},{index:18,types:["Arrow"]},{index:19,types:["pencil3","Arrow"]},{index:22,types:["Arrow"]},{index:26,types:["press0"]},{index:27,types:["lego1","Arrow"]},{index:28,types:["barrier"]},{index:37,types:["lego2","Arrow"]},{index:38,types:["star"]},{index:40,types:["hole0","hmark"]},{index:42,types:["lego3","Arrow"]}, {index:43,types:["hole0","hmark"]},{index:44,types:["star"]},{index:45,types:["hole2","hmark"]},{index:46,types:["hmark"]},{index:47,types:["hmark"]},{index:52,types:["lego4","Arrow"]},{index:56,types:["Arrow"]},{index:57,types:["Arrow"]},{index:58,types:["pencil1","Arrow"]},{index:70,types:["nut1","Arrow"]},{index:71,types:["hero0"]}];a.level15=[{index:0,types:["star"]},{index:1,types:["cork1","Arrow"]},{index:2,types:["Arrow"]},{index:3,types:["hole0","hmark"]},{index:4,types:["star"]},{index:5, types:["lego0","Arrow"]},{index:6,types:["hole0","hmark"]},{index:9,types:["Arrow"]},{index:10,types:["Arrow"]},{index:16,types:["press0"]},{index:20,types:["hole2","hmark"]},{index:21,types:["hmark"]},{index:22,types:["hmark"]},{index:24,types:["Arrow"]},{index:25,types:["Arrow"]},{index:26,types:["Arrow"]},{index:27,types:["Arrow"]},{index:28,types:["Arrow"]},{index:29,types:["Arrow"]},{index:30,types:["pencil0","Arrow"]},{index:34,types:["hero0"]},{index:35,types:["barrier"]},{index:36,types:["hero1"]}, {index:41,types:["pencil91","Arrow"]},{index:42,types:["Arrow"]},{index:43,types:["Arrow"]},{index:44,types:["Arrow"]},{index:45,types:["Arrow"]},{index:46,types:["Arrow"]},{index:47,types:["Arrow"]},{index:57,types:["eraser","Arrow"]},{index:58,types:["Arrow"]},{index:59,types:["Arrow"]},{index:61,types:["lego15","Arrow"]},{index:62,types:["Arrow"]},{index:65,types:["Arrow"]},{index:66,types:["Arrow"]},{index:67,types:["Arrow"]},{index:69,types:["star"]},{index:70,types:["hole0","hmark"]}];a.level16= [{index:6,types:["pencil91","Arrow"]},{index:7,types:["Arrow"]},{index:9,types:["hero0"]},{index:10,types:["hole0","hmark"]},{index:16,types:["lego9","Arrow"]},{index:20,types:["hole2","hmark"]},{index:21,types:["hmark"]},{index:22,types:["hmark"]},{index:24,types:["Arrow"]},{index:25,types:["barrier"]},{index:26,types:["lego2","Arrow"]},{index:27,types:["star"]},{index:28,types:["lego4","Arrow"]},{index:29,types:["star"]},{index:30,types:["lego5","Arrow"]},{index:31,types:["barrier"]},{index:33, types:["press0"]},{index:34,types:["hole1","hmark"]},{index:35,types:["hmark"]},{index:41,types:["stud","Arrow"]},{index:42,types:["star"]},{index:49,types:["eraser","Arrow"]},{index:50,types:["Arrow"]},{index:51,types:["Arrow"]},{index:53,types:["cork0","Arrow"]},{index:54,types:["Arrow"]},{index:57,types:["Arrow"]},{index:58,types:["Arrow"]},{index:59,types:["Arrow"]},{index:61,types:["Arrow"]},{index:62,types:["Arrow"]},{index:68,types:["hero1"]}];a.level17=[{index:0,types:["star"]},{index:1,types:["hole0", "hmark"]},{index:9,types:["star"]},{index:11,types:["barrier"]},{index:12,types:["lego10","Arrow"]},{index:13,types:["hole0","hmark"]},{index:15,types:["press0"]},{index:17,types:["hole0","hmark"]},{index:19,types:["lego1","Arrow"]},{index:20,types:["Arrow"]},{index:21,types:["stud","Arrow"]},{index:27,types:["hole1","hmark"]},{index:28,types:["hmark"]},{index:35,types:["cork0","Arrow"]},{index:36,types:["Arrow"]},{index:38,types:["hole0","hmark"]},{index:39,types:["star"]},{index:40,types:["Arrow"]}, {index:41,types:["pencil2","Arrow"]},{index:43,types:["Arrow"]},{index:44,types:["Arrow"]},{index:46,types:["pencil93","Arrow"]},{index:47,types:["Arrow"]},{index:51,types:["hole1","hmark"]},{index:52,types:["hmark"]},{index:59,types:["cork1","Arrow"]},{index:60,types:["Arrow"]},{index:65,types:["hero0"]},{index:67,types:["Arrow"]},{index:68,types:["Arrow"]},{index:70,types:["hero1"]}];a.level18=[{index:2,types:["lego1","Arrow"]},{index:5,types:["lego11","Arrow"]},{index:8,types:["hero0"]},{index:10, types:["lego8","Arrow"]},{index:11,types:["hero1"]},{index:13,types:["Arrow"]},{index:15,types:["press0"]},{index:18,types:["Arrow"]},{index:21,types:["hole0","hmark"]},{index:23,types:["hole0","hmark"]},{index:25,types:["hole0","hmark"]},{index:26,types:["lego12","Arrow"]},{index:29,types:["lego0","Arrow"]},{index:33,types:["star"]},{index:34,types:["Arrow"]},{index:35,types:["hole0","hmark"]},{index:40,types:["barrier"]},{index:41,types:["lego15","Arrow"]},{index:42,types:["Arrow"]},{index:43,types:["star"]}, {index:44,types:["barrier"]},{index:49,types:["cork0","Arrow"]},{index:50,types:["Arrow"]},{index:51,types:["lego16","Arrow"]},{index:52,types:["Arrow"]},{index:53,types:["lego17","Arrow"]},{index:54,types:["Arrow"]},{index:55,types:["barrier"]},{index:57,types:["Arrow"]},{index:58,types:["Arrow"]},{index:69,types:["hole0","hmark"]},{index:70,types:["star"]},{index:71,types:["nut1","Arrow"]}];a.level19=[{index:0,types:["hole1","hmark"]},{index:1,types:["hmark"]},{index:6,types:["hole1","hmark"]}, {index:7,types:["hmark"]},{index:8,types:["star"]},{index:9,types:["nut0","Arrow"]},{index:11,types:["press0"]},{index:17,types:["hole1","hmark"]},{index:18,types:["hmark"]},{index:19,types:["cork1","Arrow"]},{index:20,types:["Arrow"]},{index:21,types:["hole1","hmark"]},{index:22,types:["hmark"]},{index:27,types:["Arrow"]},{index:28,types:["Arrow"]},{index:32,types:["hole0","hmark"]},{index:34,types:["hero0"]},{index:35,types:["hole1","hmark"]},{index:36,types:["hmark"]},{index:37,types:["hero1"]}, {index:39,types:["hole0","hmark"]},{index:43,types:["cork0","Arrow"]},{index:44,types:["Arrow"]},{index:49,types:["hole1","hmark"]},{index:50,types:["hmark"]},{index:51,types:["Arrow"]},{index:52,types:["Arrow"]},{index:53,types:["hole1","hmark"]},{index:54,types:["hmark"]},{index:57,types:["barrier"]},{index:62,types:["barrier"]},{index:64,types:["hole1","hmark"]},{index:65,types:["hmark"]},{index:66,types:["star"]},{index:69,types:["star"]},{index:70,types:["hole1","hmark"]},{index:71,types:["hmark"]}]; return a}(),Utils=function(){function a(){}a.getIndex=function(a,c){return 8*Math.floor(c/70)+Math.floor(a/80)};a.getPoint=function(a){return new createjs.Point((a-Math.floor(a/Config.WIDTH)*Config.WIDTH)*Config.SIZE_H,Math.floor(a/Config.WIDTH)*Config.SIZE_W)};a.addBitmap=function(a,c,e,d,f,g,h){"undefined"===typeof f&&(f=!1);"undefined"===typeof g&&(g=0);"undefined"===typeof h&&(h=!1);var k,l;e&&"string"==typeof e?(l=ImagesRes.getImage(e),k=new createjs.Bitmap(l)):e&&e instanceof HTMLImageElement&& (l=e,k=new createjs.Bitmap(l));k.snapToPixel=!0;k.mouseEnabled=f;d.addChild(k);k.x=a;k.y=c;k.rotation=g;h&&(k.regX=l.width>>1,k.regY=l.height>>1)};return a}(),Blind=function(a){function b(){a.call(this);createjs.Tween.get(this).wait(10).call(this.addBitmap,[],this)}__extends(b,a);b.prototype.addBitmap=function(){this.dispatchEvent(new GUIEvent(GUIEvent.BLIND_CLOSED,!1,!1));createjs.Tween.get(this).wait(10).call(this.removeBitmap,[],this)};b.prototype.removeBitmap=function(){this.dispatchEvent(new GameEvent(GameEvent.COMPLETE, !1,!1))};b.prototype.destroy=function(){};return b}(createjs.Container),Credits=function(a){function b(){a.call(this);a.prototype.addCommonBg.call(this,ImagesRes.CREDITS_BG);this.createButtons()}__extends(b,a);b.prototype.createButtons=function(){this.buttonBack=new Button(ImagesRes.BUTTON_BACK,ImagesRes.BUTTON_BACK_OVER);this.addChild(this.buttonBack);this.buttonBack.y=560;this.buttonBack.x=Config.STAGE_W-this.buttonBack.width>>1;this.buttonBack.name=View.MAIN_MENU};b.prototype.destroy=function(){a.prototype.destroy.call(this); this.buttonBack=null};return b}(View),Intro=function(a){function b(){a.call(this);this.frames=[];a.prototype.addCommonBg.call(this,ImagesRes.INTRO_BG);this.createFrames();this.createButtons()}__extends(b,a);b.prototype.createFrames=function(){var a;this.startingPositions=[{x:17,y:86},{x:308,y:111},{x:13,y:327}];a=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.INTRO_ICON+0));this.addChild(a);a.x=this.startingPositions[0].x;a.y=this.startingPositions[0].y;this.frames.push(a);a.alpha=0;a=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.INTRO_ICON+ 1));this.addChild(a);a.x=this.startingPositions[1].x;a.y=this.startingPositions[1].y;this.frames.push(a);a.alpha=0;a=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.INTRO_ICON+2));this.addChildAt(a,this.getNumChildren()-1);a.x=this.startingPositions[2].x;a.y=this.startingPositions[2].y;this.frames.push(a);a.alpha=0;this.showNext(0);this.on(GUIEvent.MOUSE_CLICK,this.clickIntroHandler,this)};b.prototype.createButtons=function(){this.buttonNext=new Button(ImagesRes.BUTTON_PLAY_PRE,ImagesRes.BUTTON_PLAY_PRE_OVER); this.addChild(this.buttonNext);this.buttonNext.y=595;this.buttonNext.x=Config.STAGE_W-this.buttonNext.width>>1;this.buttonNext.name=View.GAME};b.prototype.clickIntroHandler=function(a){if(this.frames)for(a=0;a<this.frames.length;a++)if(1!=this.frames[a].alpha){createjs.Tween.removeTweens(this.frames[a]);this.frames[a].alpha=1;this.showNext(a+1);break}};b.prototype.showNext=function(a){this.frames&&this.frames.length>a&&createjs.Tween.get(this.frames[a]).to({alpha:1},400,createjs.Ease.quartOut).wait(800).call(this.showNext, [a+1],this)};b.prototype.destroy=function(){a.prototype.destroy.call(this);this.removeAllEventListeners();for(var b=0;b<this.frames.length;b++)createjs.Tween.removeTweens(this.frames[b]);this.frames.length=0;this.buttonNext=this.frames=null};return b}(View),Levels=function(a){function b(){a.call(this);a.prototype.addCommonBg.call(this,ImagesRes.LEVEL_SELECT_BG);this.createButtons()}__extends(b,a);b.prototype.createButtons=function(){for(var a,b,d,f=0;f<Progress.starsToLevels.length;f++)b=f%5,d=(f- b)/5,f<Progress.levelsCompleted?(a=new LevelButton(f+1,Progress.starsToLevels[f]),this.addChild(a),a.x=45+115*b,a.y=185+104*d,a.name=f.toString()):(a=new createjs.Bitmap(ImagesRes.getImage(ImagesRes.BUTTON_LS_LOCK)),this.addChild(a),a.x=45+115*b,a.y=185+104*d,a.mouseEnabled=!1),a.snapToPixel=!0;this.buttonBack=new Button(ImagesRes.BUTTON_BACK,ImagesRes.BUTTON_BACK_OVER);this.addChild(this.buttonBack);this.buttonBack.x=Config.STAGE_W-this.buttonBack.width>>1;this.buttonBack.y=595;this.buttonBack.name= View.MAIN_MENU};b.prototype.destroy=function(){a.prototype.destroy.call(this);this.buttonBack=null};return b}(View),MainMenu=function(a){function b(){a.call(this);a.prototype.addCommonBg.call(this);this.createButtons()}__extends(b,a);b.prototype.createButtons=function(){this.buttonSound=new Button(ImagesRes.BUTTON_SOUND_ON,ImagesRes.BUTTON_SOUND_ON_OVER,ImagesRes.BUTTON_SOUND_OFF,ImagesRes.BUTTON_SOUND_OFF_OVER);this.addChild(this.buttonSound);this.buttonSound.x=550;this.buttonSound.y=200-Config.PADDING; this.buttonSound.name="";this.buttonMore=new Button(ImagesRes.BUTTON_MORE,ImagesRes.BUTTON_MORE_OVER);this.addChild(this.buttonMore);this.buttonMore.x=250+(this.buttonMore.width>>1);this.buttonMore.y=830-Config.PADDING+(this.buttonMore.height>>1);this.buttonMore.name=View.MORE_GAMES;this.buttonMore.regX=this.buttonMore.width>>1;this.buttonMore.regY=this.buttonMore.height>>1;createjs.Tween.get(this.buttonMore,{ignoreGlobalPause:!0}).wait(250).from({scaleX:.4,scaleY:.4,alpha:0,y:this.buttonMore.y+40}, 300,createjs.Ease.bounceOut);this.buttonPlay=new Button(ImagesRes.BUTTON_PLAY,ImagesRes.BUTTON_PLAY_OVER);this.addChild(this.buttonPlay);this.buttonPlay.x=20+(this.buttonPlay.width>>1);this.buttonPlay.y=710-Config.PADDING+(this.buttonPlay.height>>1);this.buttonPlay.name=View.LEVELS;this.buttonPlay.regX=this.buttonPlay.width>>1;this.buttonPlay.regY=this.buttonPlay.height>>1;createjs.Tween.get(this.buttonPlay,{ignoreGlobalPause:!0}).wait(100).from({scaleX:.4,scaleY:.4,alpha:0,y:this.buttonPlay.y+40}, 300,createjs.Ease.bounceOut);this.buttonCredits=new Button(ImagesRes.BUTTON_CREDITS,ImagesRes.BUTTON_CREDITS_OVER);this.addChild(this.buttonCredits);this.buttonCredits.x=370+(this.buttonCredits.width>>1);this.buttonCredits.y=830-Config.PADDING+(this.buttonCredits.height>>1);this.buttonCredits.name=View.CREDITS;this.buttonCredits.regX=this.buttonCredits.width>>1;this.buttonCredits.regY=this.buttonCredits.height>>1;createjs.Tween.get(this.buttonCredits,{ignoreGlobalPause:!0}).wait(400).from({scaleX:.4, scaleY:.4,alpha:0,y:this.buttonCredits.y+40},300,createjs.Ease.bounceOut).call(this.startTween,[],this)};b.prototype.startTween=function(){this.buttonPlay.clasp(100);this.buttonCredits.clasp(100);this.buttonMore.clasp(700)};b.prototype.destroy=function(){createjs.Tween.removeTweens(this.buttonMore);createjs.Tween.removeTweens(this.buttonCredits);createjs.Tween.removeTweens(this.buttonPlay);a.prototype.destroy.call(this);this.buttonSound=this.buttonPlay=this.buttonMore=this.buttonCredits=null};return b}(View), PopupGame=function(a){function b(b){a.call(this);this.game=b;b=new createjs.Graphics;var e=new createjs.Shape(b);b.beginFill("rgba(255,255,255,0.7)");b.drawRect(0,0,Config.STAGE_W,Config.PADDING);b.endFill();e.snapToPixel=!0;Core.instance.bg.addShape(e);b=new createjs.Graphics;e=new createjs.Shape(b);b.beginFill("rgba(255,255,255,0.7)");b.drawRect(0,Config.PADDING+Config.STAGE_H_MIN,Config.STAGE_W,Config.PADDING);b.endFill();e.snapToPixel=!0;Core.instance.bg.addShape(e);b=new createjs.Graphics;e= new createjs.Shape(b);b.beginFill("rgba(255,255,255,0.7)");b.drawRect(0,0,Config.STAGE_W,Config.STAGE_H_MIN);b.endFill();e.snapToPixel=!0;this.addChild(e);GameBranding.addLogo(this);this.createButtons();this.on(GUIEvent.MOUSE_CLICK,this.clickHandler,this);createjs.Ticker.setPaused(!0)}__extends(b,a);b.prototype.clickHandler=function(a){a.stopPropagation();if(a.target.parent instanceof Button){if(a.target.parent.name){Hero.currentView=null;Hero.currentTween=null;if(a.target.parent.name==View.MORE_GAMES){GameBranding.clickMoreHandler(a); return}var b;a.target.parent.name==View.MAIN_MENU||a.target.parent.name==View.LEVELS?(b=new GUIEvent(GUIEvent.GOTO_WINDOW),b.window=a.target.parent.name,this.game.dispatchEvent(b)):a.target.parent.name==GameEvent.RESTART?(a=new GameEvent(GameEvent.RESTART),this.game.dispatchEvent(a)):a.target.parent.name==GameEvent.LEVEL_COMPLETE&&(a=new GameEvent(GameEvent.LEVEL_COMPLETE),this.game.dispatchEvent(a))}createjs.Ticker.setPaused(!1);this.hide()}};b.prototype.createButtons=function(a,b,d){"undefined"=== typeof a&&(a=445);"undefined"===typeof b&&(b=430);"undefined"===typeof d&&(d=430);this.buttonPlay=new Button(ImagesRes.BUTTON_PLAY_PRE,ImagesRes.BUTTON_PLAY_PRE_OVER);this.addChild(this.buttonPlay);this.buttonPlay.y=a;this.buttonPlay.x=Config.STAGE_W>>1;this.buttonPlay.regX=this.buttonPlay.width>>1;this.buttonPlay.regY=this.buttonPlay.height>>1;this.buttonPlay.name="";createjs.Tween.get(this.buttonPlay,{ignoreGlobalPause:!0}).wait(400).from({scaleX:.4,scaleY:.4,alpha:0,y:a+40},300,createjs.Ease.bounceOut).call(this.startTween, [],this);this.buttonReset=new Button(ImagesRes.BUTTON_RESET_BIG,ImagesRes.BUTTON_RESET_BIG_OVER);this.addChild(this.buttonReset);this.buttonReset.y=b;this.buttonReset.x=this.buttonPlay.x-160;this.buttonReset.regX=this.buttonReset.width>>1;this.buttonReset.regY=this.buttonReset.height>>1;this.buttonReset.name=GameEvent.RESTART;createjs.Tween.get(this.buttonReset,{ignoreGlobalPause:!0}).wait(100).from({scaleX:.4,scaleY:.4,alpha:0,y:b+40},300,createjs.Ease.bounceOut);this.buttonMenu=new Button(ImagesRes.BUTTON_MENU_BIG, ImagesRes.BUTTON_MENU_BIG_OVER);this.addChild(this.buttonMenu);this.buttonMenu.y=d;this.buttonMenu.x=this.buttonPlay.x+160;this.buttonMenu.regX=this.buttonMenu.width>>1;this.buttonMenu.regY=this.buttonMenu.height>>1;this.buttonMenu.name=View.LEVELS;createjs.Tween.get(this.buttonMenu,{ignoreGlobalPause:!0}).wait(250).from({scaleX:.4,scaleY:.4,alpha:0,y:d+40},300,createjs.Ease.bounceOut)};b.prototype.startTween=function(){this.buttonPlay.clasp(700);this.buttonReset.clasp(100);this.buttonMenu.clasp(100)}; b.prototype.startPause=function(){createjs.Ticker.setPaused(!0)};b.prototype.hide=function(){Core.instance.getView()instanceof Game&&GameBranding.addLogo(Core.instance.getView());this.parent.removeChild(this);this.destroy()};b.prototype.destroy=function(){createjs.Tween.removeTweens(this.buttonPlay);createjs.Tween.removeTweens(this.buttonReset);createjs.Tween.removeTweens(this.buttonMenu);Core.instance.bg.removeAllShapes();this.removeAllEventListeners();this.removeAllChildren();this.game=this.buttonMore= this.buttonMenu=this.buttonPlay=this.buttonReset=null};return b}(createjs.Container),GameComplete=function(a){function b(){a.call(this);a.prototype.addCommonBg.call(this,ImagesRes.GAME_COMPLETE_BG);this.createButtons()}__extends(b,a);b.prototype.createButtons=function(){this.buttonMenu=new Button(ImagesRes.BUTTON_MENU_BIG,ImagesRes.BUTTON_MENU_BIG_OVER);this.addChild(this.buttonMenu);this.buttonMenu.x=Config.STAGE_W>>1;this.buttonMenu.y=590;this.buttonMenu.regX=this.buttonMenu.width>>1;this.buttonMenu.regY= this.buttonMenu.height>>1;this.buttonMenu.name=View.LEVELS;createjs.Tween.get(this.buttonMenu,{ignoreGlobalPause:!0}).wait(10).from({scaleX:.4,scaleY:.4,alpha:0,y:630},300,createjs.Ease.bounceOut)};b.prototype.destroy=function(){a.prototype.destroy.call(this);this.buttonMenu=null};return b}(View),Victory=function(a){function b(b){a.call(this,b);this.stars=[];b=ImagesRes.getImage(ImagesRes.VICTORY_TITLE);var e=new createjs.Bitmap(b);e.mouseEnabled=!1;e.snapToPixel=!0;this.addChild(e);e.x=Config.STAGE_W>> 1;e.y=355;e.regX=b.width>>1;e.regY=b.height>>1;createjs.Tween.get(e,{ignoreGlobalPause:!0}).from({scaleX:.5,scaleY:.5,alpha:.5},400,createjs.Ease.linear);this.createStars()}__extends(b,a);b.prototype.createStars=function(){for(var a,b=ImagesRes.getImage(ImagesRes.STAR_VICTORY),d=0;d<Progress.currentStars;d++)a=new createjs.Bitmap(b),this.addChild(a),a.regX=b.width>>1,a.regY=b.height>>1,a.x=190+a.regX+95*d,a.y=70+a.regY,1==d&&(a.y-=20),this.stars.push(a),createjs.Tween.get(a,{ignoreGlobalPause:!0}).wait(300* (d+1)).from({scaleX:.4,scaleY:.4,alpha:0,y:a.y+20},300,createjs.Ease.bounceOut).call(this.rotateLeft,[d],this);Progress.starsToLevels[Progress.currentLevel]<Progress.currentStars&&(Progress.starsToLevels[Progress.currentLevel]=Progress.currentStars);Progress.starsToLevels.length>Progress.levelsCompleted&&Progress.currentLevel+1==Progress.levelsCompleted&&Progress.levelsCompleted++;Core.instance.model.saveProgress();Progress.currentStars=0};b.prototype.createButtons=function(){a.prototype.createButtons.call(this, 650,635,635);this.buttonPlay.name=GameEvent.LEVEL_COMPLETE;this.buttonMore=new Button(ImagesRes.BUTTON_MORE,ImagesRes.BUTTON_MORE_OVER);this.addChild(this.buttonMore);this.buttonMore.y=180;this.buttonMore.x=75;this.buttonMore.regX=this.buttonMore.width>>1;this.buttonMore.regY=this.buttonMore.height>>1;this.buttonMore.name=View.MORE_GAMES;createjs.Tween.get(this.buttonMore,{ignoreGlobalPause:!0}).wait(550).from({scaleX:.4,scaleY:.4,alpha:0,y:220},300,createjs.Ease.bounceOut)};b.prototype.rotateLeft= function(a){createjs.Tween.get(this.stars[a],{ignoreGlobalPause:!0}).to({scaleX:-1},900,createjs.Ease.quadInOut).call(this.roteteRight,[a],this)};b.prototype.roteteRight=function(a){createjs.Tween.get(this.stars[a],{ignoreGlobalPause:!0}).to({scaleX:1},900,createjs.Ease.quadInOut).call(this.rotateLeft,[a],this)};b.prototype.destroy=function(){for(var b=0;b<this.stars.length;b++)createjs.Tween.removeTweens(this.stars[b]);this.stars.length=0;this.stars=null;a.prototype.destroy.call(this)};return b}(PopupGame);